(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3814],{64129:function(t,e,r){"use strict";var n=r(29662),i=Object.prototype.toString,o=function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===i.call(t)},s="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===i.call(t)},a=function(t,e){for(var r=0;r<e.length&&!1!==t(e[r],r,e);r+=1);},u=function(t,e){for(var r=n(e),i=0;i<r.length&&!1!==t(e[r[i]],r[i],e);i+=1);};t.exports=function(t,e){return(null!=e&&(s(e)||"function"!==e&&o(e.length))?a:u).call(this,t,e)}},29662:function(t){"use strict";var e=Object.prototype.hasOwnProperty,r=String.prototype.charAt,n=Object.prototype.toString,i=function(t,e){return r.call(t,e)},o=function(t,r){return e.call(t,r)},s=function(t,e){e=e||o;for(var r=[],n=0,i=t.length;n<i;n+=1)e(t,n)&&r.push(String(n));return r},a=function(t,e){e=e||o;var r=[];for(var n in t)e(t,n)&&r.push(String(n));return r};t.exports=function(t){return null==t?[]:"[object String]"===n.call(t)?s(t,i):null!=t&&"function"!=typeof t&&"number"==typeof t.length?s(t,o):a(t)}},56410:function(t,e,r){"use strict";var n=r(64129);t.exports=function(t,e){if("function"!=typeof t)throw TypeError("Expected a function but received a "+typeof t);var r=[];return n(function(e,n,i){r.push(t(e,n,i))},e),r}},84808:function(t){t.exports=function(t){var e;return'(function() {\n  // define the key where the global analytics object will be accessible\n  // customers can safely set this to be something else if need be\n  var globalAnalyticsKey = "'+(null==(e=t.globalAnalyticsKey)?"":e)+'"\n\n  // Create a queue, but don\'t obliterate an existing one!\n  var analytics = window[globalAnalyticsKey] = window[globalAnalyticsKey] || [];\n\n  // If the real analytics.js is already on the page return.\n  if (analytics.initialize) return;\n\n  // If the snippet was invoked already show an error.\n  if (analytics.invoked) {\n    if (window.console && console.error) {\n      console.error("Segment snippet included twice.");\n    }\n    return;\n  }\n\n  // Invoked flag, to make sure the snippet\n  // is never invoked twice.\n  analytics.invoked = true;\n\n  // A list of the methods in Analytics.js to stub.\n  analytics.methods = [\n    "trackSubmit",\n    "trackClick",\n    "trackLink",\n    "trackForm",\n    "pageview",\n    "identify",\n    "reset",\n    "group",\n    "track",\n    "ready",\n    "alias",\n    "debug",\n    "page",\n    "screen",\n    "once",\n    "off",\n    "on",\n    "addSourceMiddleware",\n    "addIntegrationMiddleware",\n    "setAnonymousId",\n    "addDestinationMiddleware",\n    "register"\n  ];\n\n  // Define a factory to create stubs. These are placeholders\n  // for methods in Analytics.js so that you never have to wait\n  // for it to load to actually record data. The `method` is\n  // stored as the first argument, so we can replay the data.\n  analytics.factory = function(e) {\n    return function() {\n      if (window[globalAnalyticsKey].initialized) {\n        // Sometimes users assigned analytics to a variable before analytics is done loading, resulting in a stale reference.\n        // If so, proxy any calls to the \'real\' analytics instance.\n        return window[globalAnalyticsKey][e].apply(window[globalAnalyticsKey], arguments);\n      }\n      var args = Array.prototype.slice.call(arguments);\n      \n      // Add buffered page context object so page information is always up-to-date\n      if (["track", "screen", "alias", "group", "page", "identify"].indexOf(e) > -1) {\n        var c = document.querySelector("link[rel=\'canonical\']");\n        args.push({\n          __t: "bpc",\n          c: c && c.getAttribute("href") || undefined,\n          p: location.pathname,\n          u: location.href,\n          s: location.search,\n          t: document.title,\n          r: document.referrer\n        });\n      }\n\n      args.unshift(e);\n      analytics.push(args);\n      return analytics;\n    };\n  };\n\n\n  // For each of our methods, generate a queueing stub.\n  for (var i = 0; i < analytics.methods.length; i++) {\n    var key = analytics.methods[i];\n    analytics[key] = analytics.factory(key);\n  }\n\n  // Define a method to load Analytics.js from our CDN,\n  // and that will be sure to only ever load it once.\n  analytics.load = function(key, options) {\n    // Create an async script element based on your key.\n    var t = document.createElement("script");\n    t.type = "text/javascript";\n    t.async = true;\n    t.setAttribute("data-global-segment-analytics-key", globalAnalyticsKey)\n    t.src = "https://'+(null==(e=t.host)?"":e)+(null==(e=t.ajsPath)?"":e)+'";\n\n    // Insert our script next to the first script element.\n    var first = document.getElementsByTagName("script")[0];\n    first.parentNode.insertBefore(t, first);\n    analytics._loadOptions = options;\n  };\n  analytics._writeKey = "'+(null==(e=t.apiKey)?"":e)+'";\n\n  '+(null==(e=t.optionalCDN)?"":e)+"\n\n  // Add a version to keep track of what's in the wild.\n  analytics.SNIPPET_VERSION = \"5.2.0\";\n\n  // Load Analytics.js with your key, which will automatically\n  // load the tools you've enabled for your account. Boosh!\n  "+(null==(e=t.load)?"":e)+"\n\n  // Make the first page call to load the integrations. If\n  // you'd like to manually name or tag the page, edit or\n  // move this call however you'd like.\n  "+(null==(e=t.page)?"":e)+"\n})();"}},4509:function(t){t.exports=function(t){var e;return'!function(){var i="'+(null==(e=t.globalAnalyticsKey)?"":e)+'",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel=\'canonical\']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://'+(null==(e=t.host)?"":e)+(null==(e=t.ajsPath)?"":e)+'";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="'+(null==(e=t.apiKey)?"":e)+'";'+(null==(e=t.optionalCDN)?"":e)+';analytics.SNIPPET_VERSION="5.2.0";\n'+(null==(e=t.load)?"":e)+"\n"+(null==(e=t.page)?"":e)+"\n}}();"}},20161:function(t,e,r){"use strict";r(56410),r(84808),r(4509),Object.prototype.hasOwnProperty},14307:function(t,e,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}();t.exports=e=n.fetch,n.fetch&&(e.default=n.fetch.bind(n)),e.Headers=n.Headers,e.Request=n.Request,e.Response=n.Response},81614:function(t,e){"use strict";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */e.Q=function(t,e){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var r={},n=(e||{}).decode||i,o=0;o<t.length;){var s=t.indexOf("=",o);if(-1===s)break;var a=t.indexOf(";",o);if(-1===a)a=t.length;else if(a<s){o=t.lastIndexOf(";",s-1)+1;continue}var u=t.slice(o,s).trim();if(void 0===r[u]){var l=t.slice(s+1,a).trim();34===l.charCodeAt(0)&&(l=l.slice(1,-1)),r[u]=function(t,e){try{return e(t)}catch(e){return t}}(l,n)}o=a+1}return r},e.q=function(t,e,i){var s=i||{},a=s.encode||o;if("function"!=typeof a)throw TypeError("option encode is invalid");if(!n.test(t))throw TypeError("argument name is invalid");var u=a(e);if(u&&!n.test(u))throw TypeError("argument val is invalid");var l=t+"="+u;if(null!=s.maxAge){var c=s.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(s.domain){if(!n.test(s.domain))throw TypeError("option domain is invalid");l+="; Domain="+s.domain}if(s.path){if(!n.test(s.path))throw TypeError("option path is invalid");l+="; Path="+s.path}if(s.expires){var h=s.expires;if("[object Date]"!==r.call(h)&&!(h instanceof Date)||isNaN(h.valueOf()))throw TypeError("option expires is invalid");l+="; Expires="+h.toUTCString()}if(s.httpOnly&&(l+="; HttpOnly"),s.secure&&(l+="; Secure"),s.priority)switch("string"==typeof s.priority?s.priority.toLowerCase():s.priority){case"low":l+="; Priority=Low";break;case"medium":l+="; Priority=Medium";break;case"high":l+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var r=Object.prototype.toString,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function i(t){return -1!==t.indexOf("%")?decodeURIComponent(t):t}function o(t){return encodeURIComponent(t)}},46295:function(t){t.exports.x=function(t,e,r){let n=encodeURIComponent(e);if(n.length<=r)return[{name:t,value:e}];let i=[];for(;n.length>0;){let t,e=n.slice(0,r),o=e.lastIndexOf("%");for(o>r-3&&(e=e.slice(0,o));e.length>0;)try{t=decodeURIComponent(e);break}catch(t){if(t instanceof URIError&&"%"===e.at(-3)&&e.length>3)e=e.slice(0,e.length-3);else throw t}i.push(t),n=n.slice(e.length)}return i.map((e,r)=>({name:`${t}.${r}`,value:e}))}},48738:function(t,e){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return(r+n)*3/4-n},e.toByteArray=function(t){var e,r,o=u(t),s=o[0],a=o[1],l=new i((s+a)*3/4-a),c=0,h=a>0?s-4:s;for(r=0;r<h;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;return 2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,l[c++]=255&e),1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e),l},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(function(t,e,n){for(var i,o=[],s=e;s<n;s+=3)o.push(r[(i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(t,s,s+16383>a?a:s+16383));return 1===i?o.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&o.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},9109:function(t,e,r){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */let n=r(48738),i=r(6868),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return c(t)}return u(t,e,r)}function u(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!a.isEncoding(e))throw TypeError("Unknown encoding: "+e);let r=0|p(t,e),n=s(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(D(t,Uint8Array)){let e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return h(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(D(t,ArrayBuffer)||t&&D(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(D(t,SharedArrayBuffer)||t&&D(t.buffer,SharedArrayBuffer)))return f(t,e,r);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return a.from(n,e,r);let i=function(t){var e;if(a.isBuffer(t)){let e=0|d(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?s(0):h(t):"Buffer"===t.type&&Array.isArray(t.data)?h(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function c(t){return l(t),s(t<0?0:0|d(t))}function h(t){let e=t.length<0?0:0|d(t.length),r=s(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function f(t,e,r){let n;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),a.prototype),n}function d(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function p(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||D(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return L(t).length;default:if(i)return n?-1:I(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,r){let i=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=q[t[n]];return i}(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return function(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":var o,s;return o=e,s=r,0===o&&s===this.length?n.fromByteArray(this):n.fromByteArray(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){let n=t.slice(e,r),i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}(this,e,r);default:if(i)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function m(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,i){var o;if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return -1;r=t.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof e&&(e=a.from(e,n)),a.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){let o,s=1,a=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;s=2,a/=2,u/=2,r/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<a;o++)if(l(t,o)===l(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else -1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(l(t,o+n)!==l(e,n)){r=!1;break}if(r)return o}return -1}function b(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let e=t[i],o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:e<128&&(o=e);break;case 2:(192&(r=t[i+1]))==128&&(u=(31&e)<<6|63&r)>127&&(o=u);break;case 3:r=t[i+1],n=t[i+2],(192&r)==128&&(192&n)==128&&(u=(15&e)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=t[i+1],n=t[i+2],a=t[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(u=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}function w(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function _(t,e,r,n,i,o){if(!a.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw RangeError('"value" argument is out of bounds');if(r+n>t.length)throw RangeError("Index out of range")}function x(t,e,r,n,i){R(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function S(t,e,r,n,i){R(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function k(t,e,r,n,i,o){if(r+n>t.length||r<0)throw RangeError("Index out of range")}function E(t,e,r,n,o){return e=+e,r>>>=0,o||k(t,e,r,4,34028234663852886e22,-34028234663852886e22),i.write(t,e,r,n,23,4),r+4}function O(t,e,r,n,o){return e=+e,r>>>=0,o||k(t,e,r,8,17976931348623157e292,-17976931348623157e292),i.write(t,e,r,n,52,8),r+8}e.lW=a,e.h2=50,a.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return u(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return(l(t),t<=0)?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)},a.allocUnsafe=function(t){return c(t)},a.allocUnsafeSlow=function(t){return c(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(D(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),D(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){let r;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;let n=a.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){let e=t[r];if(D(e,Uint8Array))i+e.length>n.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else if(a.isBuffer(e))e.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=e.length}return n},a.byteLength=p,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)m(this,e,e+1);return this},a.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},a.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},a.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):y.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let t="",r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(t,e,r,n,i){if(D(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;let o=i-n,s=r-e,u=Math.min(o,s),l=this.slice(n,i),c=t.slice(e,r);for(let t=0;t<u;++t)if(l[t]!==c[t]){o=l[t],s=c[t];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},a.prototype.write=function(t,e,r,n){var i,o,s,a,u,l,c,h;if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let d=!1;for(;;)switch(n){case"hex":return function(t,e,r,n){let i;r=Number(r)||0;let o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;let s=e.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){let n=parseInt(e.substr(2*i,2),16);if(n!=n)break;t[r+i]=n}return i}(this,t,e,r);case"utf8":case"utf-8":return i=e,o=r,$(I(t,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=e,a=r,$(function(t){let e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(t),this,s,a);case"base64":return u=e,l=r,$(L(t),this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=e,h=r,$(function(t,e){let r,n;let i=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(t,this.length-c),this,c,h);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){let r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);let n=this.subarray(t,e);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||w(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||w(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&A(t,this.length-8);let n=e+256*this[++t]+65536*this[++t]+16777216*this[++t],i=this[++t]+256*this[++t]+65536*this[++t]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),a.prototype.readBigUInt64BE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&A(t,this.length-8);let n=16777216*e+65536*this[++t]+256*this[++t]+this[++t],i=16777216*this[++t]+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||w(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return(t>>>=0,e||w(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||w(t,2,this.length);let r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||w(t,2,this.length);let r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&A(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),a.prototype.readBigInt64BE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&A(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+r)}),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||w(t,4,this.length),i.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||w(t,8,this.length),i.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,t,e,r,n,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,t,e,r,n,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=F(function(t,e=0){return x(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=F(function(t,e=0){return S(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=F(function(t,e=0){return x(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=F(function(t,e=0){return S(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(t,e,r){return E(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return E(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return O(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return O(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,n){if(!a.isBuffer(t))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);let i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},a.prototype.fill=function(t,e,r,n){let i;if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===t.length){let e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{let o=a.isBuffer(t)?t:a.from(t,n),s=o.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};let j={};function P(t,e,r){j[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function T(t){let e="",r=t.length,n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function R(t,e,r,n,i,o){if(t>r||t<e){let n;let i="bigint"==typeof e?"n":"";throw n=o>3?0===e||e===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${e}${i} and <= ${r}${i}`,new j.ERR_OUT_OF_RANGE("value",n,t)}C(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&A(i,n.length-(o+1))}function C(t,e){if("number"!=typeof t)throw new j.ERR_INVALID_ARG_TYPE(e,"number",t)}function A(t,e,r){if(Math.floor(t)!==t)throw C(t,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}P("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),P("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=T(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=T(i)),i+="n"),n+=` It must be ${e}. Received ${i}`},RangeError);let U=/[^+/0-9A-Za-z-_]/g;function I(t,e){let r;e=e||1/0;let n=t.length,i=null,o=[];for(let s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function L(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(U,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length)&&!(i>=t.length);++i)e[i+r]=t[i];return i}function D(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}let q=function(){let t="0123456789abcdef",e=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function F(t){return"undefined"==typeof BigInt?N:t}function N(){throw Error("BigInt not supported")}},6868:function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-c)-1,d>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=f,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=l}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?5960464477539062e-23:0,d=n?0:o-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+h>=1?e+=f/u:e+=f*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[r+d]=255&s,d+=p,s/=256,l-=8);t[r+d-p]|=128*y}},50104:function(t,e,r){var n=r(84238),i=r(14995),o=r(6727),s=r(60443),a=r(17806),u=r(46551),l=r(30761),c=r(78470),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||c(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(l(t))return!n(t).length;for(var r in t)if(h.call(t,r))return!1;return!0}},47042:function(t){"use strict";function e(){this._types=Object.create(null),this._extensions=Object.create(null);for(let t=0;t<arguments.length;t++)this.define(arguments[t]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}e.prototype.define=function(t,e){for(let r in t){let n=t[r].map(function(t){return t.toLowerCase()});r=r.toLowerCase();for(let t=0;t<n.length;t++){let i=n[t];if("*"!==i[0]){if(!e&&i in this._types)throw Error('Attempt to change mapping for "'+i+'" extension from "'+this._types[i]+'" to "'+r+'". Pass `force=true` to allow this, otherwise remove "'+i+'" from the list of extensions for "'+r+'".');this._types[i]=r}}if(e||!this._extensions[r]){let t=n[0];this._extensions[r]="*"!==t[0]?t:t.substr(1)}}},e.prototype.getType=function(t){let e=(t=String(t)).replace(/^.*[/\\]/,"").toLowerCase(),r=e.replace(/^.*\./,"").toLowerCase(),n=e.length<t.length;return(r.length<e.length-1||!n)&&this._types[r]||null},e.prototype.getExtension=function(t){return(t=/^\s*([^;\s]*)/.test(t)&&RegExp.$1)&&this._extensions[t.toLowerCase()]||null},t.exports=e},53586:function(t,e,r){"use strict";let n=r(47042);t.exports=new n(r(3327))},3327:function(t){t.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomdeleted+xml":["atomdeleted"],"application/atomsvc+xml":["atomsvc"],"application/atsc-dwd+xml":["dwd"],"application/atsc-held+xml":["held"],"application/atsc-rsat+xml":["rsat"],"application/bdoc":["bdoc"],"application/calendar+xml":["xcs"],"application/ccxml+xml":["ccxml"],"application/cdfx+xml":["cdfx"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["es","ecma"],"application/emma+xml":["emma"],"application/emotionml+xml":["emotionml"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/express":["exp"],"application/fdt+xml":["fdt"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/its+xml":["its"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lgr+xml":["lgr"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mmt-aei+xml":["maei"],"application/mmt-usd+xml":["musd"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/node":["cjs"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/p2p-overlay+xml":["relo"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/provenance+xml":["provx"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/route-apd+xml":["rapd"],"application/route-s-tsid+xml":["sls"],"application/route-usd+xml":["rusd"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/senml+xml":["senmlx"],"application/sensml+xml":["sensmlx"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/swid+xml":["swidtag"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/toml":["toml"],"application/trig":["trig"],"application/ttml+xml":["ttml"],"application/ubjson":["ubj"],"application/urc-ressheet+xml":["rsheet"],"application/urc-targetdesc+xml":["td"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-att+xml":["xav"],"application/xcap-caps+xml":["xca"],"application/xcap-diff+xml":["xdf"],"application/xcap-el+xml":["xel"],"application/xcap-ns+xml":["xns"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xliff+xml":["xlf"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["*xsl","xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/amr":["amr"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mobile-xmf":["mxmf"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx","opus"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/avif":["avif"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/hej2k":["hej2"],"image/hsj2":["hsj2"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jph":["jph"],"image/jphc":["jhc"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/jxra":["jxra"],"image/jxrs":["jxrs"],"image/jxs":["jxs"],"image/jxsc":["jxsc"],"image/jxsi":["jxsi"],"image/jxss":["jxss"],"image/ktx":["ktx"],"image/ktx2":["ktx2"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/mtl":["mtl"],"model/obj":["obj"],"model/step+xml":["stpx"],"model/step+zip":["stpz"],"model/step-xml+zip":["stpxz"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/spdx":["spdx"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/iso.segment":["m4s"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},76124:function(t,e){"use strict";var r,n=Object.prototype.hasOwnProperty;function i(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function o(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){var i,s,a=[];for(s in"string"!=typeof(e=e||"")&&(e="?"),t)if(n.call(t,s)){if(!(i=t[s])&&(null===i||i===r||isNaN(i))&&(i=""),s=o(s),i=o(i),null===s||null===i)continue;a.push(s+"="+i)}return a.length?e+a.join("&"):""},e.parse=function(t){for(var e,r=/([^=?#&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=i(e[1]),s=i(e[2]);null===o||null===s||o in n||(n[o]=s)}return n}},20956:function(t,e,r){"use strict";r.d(e,{j:function(){return s}});var n=r(87802),i=r(38081),o=r(92898),s=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){var e;if(!o.sk&&(null==(e=window)?void 0:e.addEventListener)){var r=function(){return t()};return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),function(){window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}},e}(0,n.Z)(e,t);var r=e.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var t;null==(t=this.cleanup)||t.call(this),this.cleanup=void 0}},r.setEventListener=function(t){var e,r=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t(function(t){"boolean"==typeof t?r.setFocused(t):r.onFocus()})},r.setFocused=function(t){this.focused=t,t&&this.onFocus()},r.onFocus=function(){this.listeners.forEach(function(t){t()})},r.isFocused=function(){return"boolean"==typeof this.focused?this.focused:"undefined"==typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},e}(i.l))},14204:function(t,e,r){"use strict";r.d(e,{QueryClient:function(){return n.S}});var n=r(63467),i=r(82323);r.o(i,"QueryClientProvider")&&r.d(e,{QueryClientProvider:function(){return i.QueryClientProvider}}),r.o(i,"useInfiniteQuery")&&r.d(e,{useInfiniteQuery:function(){return i.useInfiniteQuery}}),r.o(i,"useMutation")&&r.d(e,{useMutation:function(){return i.useMutation}}),r.o(i,"useQuery")&&r.d(e,{useQuery:function(){return i.useQuery}}),r.o(i,"useQueryClient")&&r.d(e,{useQueryClient:function(){return i.useQueryClient}})},49162:function(t,e,r){"use strict";r.d(e,{Gm:function(){return o},Qy:function(){return u},ZF:function(){return l}});var n=r(76732),i=r(92898);function o(){return{onFetch:function(t){t.fetchFn=function(){var e,r,o,u,l,c,h,f=null==(e=t.fetchOptions)?void 0:null==(r=e.meta)?void 0:r.refetchPage,d=null==(o=t.fetchOptions)?void 0:null==(u=o.meta)?void 0:u.fetchMore,p=null==d?void 0:d.pageParam,y=(null==d?void 0:d.direction)==="forward",m=(null==d?void 0:d.direction)==="backward",g=(null==(l=t.state.data)?void 0:l.pages)||[],v=(null==(c=t.state.data)?void 0:c.pageParams)||[],b=(0,i.G9)(),w=null==b?void 0:b.signal,_=v,x=!1,S=t.options.queryFn||function(){return Promise.reject("Missing queryFn")},k=function(t,e,r,n){return _=n?[e].concat(_):[].concat(_,[e]),n?[r].concat(t):[].concat(t,[r])},E=function(e,r,i,o){if(x)return Promise.reject("Cancelled");if(void 0===i&&!r&&e.length)return Promise.resolve(e);var s=S({queryKey:t.queryKey,signal:w,pageParam:i,meta:t.meta}),a=Promise.resolve(s).then(function(t){return k(e,i,t,o)});return(0,n.LE)(s)&&(a.cancel=s.cancel),a};if(g.length){if(y){var O=void 0!==p,j=O?p:s(t.options,g);h=E(g,O,j)}else if(m){var P=void 0!==p,T=P?p:a(t.options,g);h=E(g,P,T,!0)}else!function(){_=[];var e=void 0===t.options.getNextPageParam;h=!f||!g[0]||f(g[0],0,g)?E([],e,v[0]):Promise.resolve(k([],v[0],g[0]));for(var r=function(r){h=h.then(function(n){if(!f||!g[r]||f(g[r],r,g)){var i=e?v[r]:s(t.options,n);return E(n,e,i)}return Promise.resolve(k(n,v[r],g[r]))})},n=1;n<g.length;n++)r(n)}()}else h=E([]);var R=h.then(function(t){return{pages:t,pageParams:_}});return R.cancel=function(){x=!0,null==b||b.abort(),(0,n.LE)(h)&&h.cancel()},R}}}}function s(t,e){return null==t.getNextPageParam?void 0:t.getNextPageParam(e[e.length-1],e)}function a(t,e){return null==t.getPreviousPageParam?void 0:t.getPreviousPageParam(e[0],e)}function u(t,e){if(t.getNextPageParam&&Array.isArray(e)){var r=s(t,e);return null!=r&&!1!==r}}function l(t,e){if(t.getPreviousPageParam&&Array.isArray(e)){var r=a(t,e);return null!=r&&!1!==r}}},5765:function(t,e,r){"use strict";r.d(e,{E:function(){return o},j:function(){return i}});var n=console;function i(){return n}function o(t){n=t}},6377:function(t,e,r){"use strict";r.d(e,{R:function(){return l},m:function(){return u}});var n=r(22988),i=r(5765),o=r(16724),s=r(76732),a=r(92898),u=function(){function t(t){this.options=(0,n.Z)({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||l(),this.meta=t.meta}var e=t.prototype;return e.setState=function(t){this.dispatch({type:"setState",state:t})},e.addObserver=function(t){-1===this.observers.indexOf(t)&&this.observers.push(t)},e.removeObserver=function(t){this.observers=this.observers.filter(function(e){return e!==t})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(a.ZT).catch(a.ZT)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var t,e=this,r="loading"===this.state.status,n=Promise.resolve();return r||(this.dispatch({type:"loading",variables:this.options.variables}),n=n.then(function(){null==e.mutationCache.config.onMutate||e.mutationCache.config.onMutate(e.state.variables,e)}).then(function(){return null==e.options.onMutate?void 0:e.options.onMutate(e.state.variables)}).then(function(t){t!==e.state.context&&e.dispatch({type:"loading",context:t,variables:e.state.variables})})),n.then(function(){return e.executeMutation()}).then(function(r){t=r,null==e.mutationCache.config.onSuccess||e.mutationCache.config.onSuccess(t,e.state.variables,e.state.context,e)}).then(function(){return null==e.options.onSuccess?void 0:e.options.onSuccess(t,e.state.variables,e.state.context)}).then(function(){return null==e.options.onSettled?void 0:e.options.onSettled(t,null,e.state.variables,e.state.context)}).then(function(){return e.dispatch({type:"success",data:t}),t}).catch(function(t){return null==e.mutationCache.config.onError||e.mutationCache.config.onError(t,e.state.variables,e.state.context,e),(0,i.j)().error(t),Promise.resolve().then(function(){return null==e.options.onError?void 0:e.options.onError(t,e.state.variables,e.state.context)}).then(function(){return null==e.options.onSettled?void 0:e.options.onSettled(void 0,t,e.state.variables,e.state.context)}).then(function(){throw e.dispatch({type:"error",error:t}),t})})},e.executeMutation=function(){var t,e=this;return this.retryer=new s.m4({fn:function(){return e.options.mutationFn?e.options.mutationFn(e.state.variables):Promise.reject("No mutationFn found")},onFail:function(){e.dispatch({type:"failed"})},onPause:function(){e.dispatch({type:"pause"})},onContinue:function(){e.dispatch({type:"continue"})},retry:null!=(t=this.options.retry)?t:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(t){var e=this;this.state=function(t,e){switch(e.type){case"failed":return(0,n.Z)({},t,{failureCount:t.failureCount+1});case"pause":return(0,n.Z)({},t,{isPaused:!0});case"continue":return(0,n.Z)({},t,{isPaused:!1});case"loading":return(0,n.Z)({},t,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return(0,n.Z)({},t,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return(0,n.Z)({},t,{data:void 0,error:e.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,n.Z)({},t,e.state);default:return t}}(this.state,t),o.V.batch(function(){e.observers.forEach(function(e){e.onMutationUpdate(t)}),e.mutationCache.notify(e)})},t}();function l(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},16724:function(t,e,r){"use strict";r.d(e,{V:function(){return i}});var n=r(92898),i=new(function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=t.prototype;return e.batch=function(t){var e;this.transactions++;try{e=t()}finally{this.transactions--,this.transactions||this.flush()}return e},e.schedule=function(t){var e=this;this.transactions?this.queue.push(t):(0,n.A4)(function(){e.notifyFn(t)})},e.batchCalls=function(t){var e=this;return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.schedule(function(){t.apply(void 0,n)})}},e.flush=function(){var t=this,e=this.queue;this.queue=[],e.length&&(0,n.A4)(function(){t.batchNotifyFn(function(){e.forEach(function(e){t.notifyFn(e)})})})},e.setNotifyFunction=function(t){this.notifyFn=t},e.setBatchNotifyFunction=function(t){this.batchNotifyFn=t},t}())},28512:function(t,e,r){"use strict";r.d(e,{N:function(){return s}});var n=r(87802),i=r(38081),o=r(92898),s=new(function(t){function e(){var e;return(e=t.call(this)||this).setup=function(t){var e;if(!o.sk&&(null==(e=window)?void 0:e.addEventListener)){var r=function(){return t()};return window.addEventListener("online",r,!1),window.addEventListener("offline",r,!1),function(){window.removeEventListener("online",r),window.removeEventListener("offline",r)}}},e}(0,n.Z)(e,t);var r=e.prototype;return r.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},r.onUnsubscribe=function(){if(!this.hasListeners()){var t;null==(t=this.cleanup)||t.call(this),this.cleanup=void 0}},r.setEventListener=function(t){var e,r=this;this.setup=t,null==(e=this.cleanup)||e.call(this),this.cleanup=t(function(t){"boolean"==typeof t?r.setOnline(t):r.onOnline()})},r.setOnline=function(t){this.online=t,t&&this.onOnline()},r.onOnline=function(){this.listeners.forEach(function(t){t()})},r.isOnline=function(){return"boolean"==typeof this.online?this.online:"undefined"==typeof navigator||void 0===navigator.onLine||navigator.onLine},e}(i.l))},63467:function(t,e,r){"use strict";r.d(e,{S:function(){return g}});var n=r(22988),i=r(92898),o=r(87802),s=r(16724),a=r(5765),u=r(76732),l=function(){function t(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=t.prototype;return e.setOptions=function(t){var e;this.options=(0,n.Z)({},this.defaultOptions,t),this.meta=null==t?void 0:t.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(e=this.options.cacheTime)?e:3e5)},e.setDefaultOptions=function(t){this.defaultOptions=t},e.scheduleGc=function(){var t=this;this.clearGcTimeout(),(0,i.PN)(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){t.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){!this.observers.length&&(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(t,e){var r,n,o=this.state.data,s=(0,i.SE)(t,o);return(null==(r=(n=this.options).isDataEqual)?void 0:r.call(n,o,s))?s=o:!1!==this.options.structuralSharing&&(s=(0,i.Q$)(o,s)),this.dispatch({data:s,type:"success",dataUpdatedAt:null==e?void 0:e.updatedAt}),s},e.setState=function(t,e){this.dispatch({type:"setState",state:t,setStateOptions:e})},e.cancel=function(t){var e,r=this.promise;return null==(e=this.retryer)||e.cancel(t),r?r.then(i.ZT).catch(i.ZT):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(t){return!1!==t.options.enabled})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(t){return t.getCurrentResult().isStale})},e.isStaleByTime=function(t){return void 0===t&&(t=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,i.Kp)(this.state.dataUpdatedAt,t)},e.onFocus=function(){var t,e=this.observers.find(function(t){return t.shouldFetchOnWindowFocus()});e&&e.refetch(),null==(t=this.retryer)||t.continue()},e.onOnline=function(){var t,e=this.observers.find(function(t){return t.shouldFetchOnReconnect()});e&&e.refetch(),null==(t=this.retryer)||t.continue()},e.addObserver=function(t){-1===this.observers.indexOf(t)&&(this.observers.push(t),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))},e.removeObserver=function(t){-1!==this.observers.indexOf(t)&&(this.observers=this.observers.filter(function(e){return e!==t}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:t}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(t,e){var r,n,o,s,l,c,h=this;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(null==e?void 0:e.cancelRefetch))this.cancel({silent:!0});else if(this.promise)return null==(r=this.retryer)||r.continueRetry(),this.promise}if(t&&this.setOptions(t),!this.options.queryFn){var f=this.observers.find(function(t){return t.options.queryFn});f&&this.setOptions(f.options)}var d=(0,i.mc)(this.queryKey),p=(0,i.G9)(),y={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(y,"signal",{enumerable:!0,get:function(){if(p)return h.abortSignalConsumed=!0,p.signal}});var m={fetchOptions:e,options:this.options,queryKey:d,state:this.state,fetchFn:function(){return h.options.queryFn?(h.abortSignalConsumed=!1,h.options.queryFn(y)):Promise.reject("Missing queryFn")},meta:this.meta};return(null==(s=this.options.behavior)?void 0:s.onFetch)&&(null==(n=this.options.behavior)||n.onFetch(m)),this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(l=m.fetchOptions)?void 0:l.meta)||this.dispatch({type:"fetch",meta:null==(o=m.fetchOptions)?void 0:o.meta}),this.retryer=new u.m4({fn:m.fetchFn,abort:null==p?void 0:null==(c=p.abort)?void 0:c.bind(p),onSuccess:function(t){h.setData(t),null==h.cache.config.onSuccess||h.cache.config.onSuccess(t,h),0===h.cacheTime&&h.optionalRemove()},onError:function(t){(0,u.DV)(t)&&t.silent||h.dispatch({type:"error",error:t}),(0,u.DV)(t)||(null==h.cache.config.onError||h.cache.config.onError(t,h),(0,a.j)().error(t)),0===h.cacheTime&&h.optionalRemove()},onFail:function(){h.dispatch({type:"failed"})},onPause:function(){h.dispatch({type:"pause"})},onContinue:function(){h.dispatch({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(t){var e=this;this.state=this.reducer(this.state,t),s.V.batch(function(){e.observers.forEach(function(e){e.onQueryUpdate(t)}),e.cache.notify({query:e,type:"queryUpdated",action:t})})},e.getDefaultState=function(t){var e="function"==typeof t.initialData?t.initialData():t.initialData,r=void 0!==t.initialData?"function"==typeof t.initialDataUpdatedAt?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0,n=void 0!==e;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?null!=r?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:n?"success":"idle"}},e.reducer=function(t,e){var r,i;switch(e.type){case"failed":return(0,n.Z)({},t,{fetchFailureCount:t.fetchFailureCount+1});case"pause":return(0,n.Z)({},t,{isPaused:!0});case"continue":return(0,n.Z)({},t,{isPaused:!1});case"fetch":return(0,n.Z)({},t,{fetchFailureCount:0,fetchMeta:null!=(r=e.meta)?r:null,isFetching:!0,isPaused:!1},!t.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,n.Z)({},t,{data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:null!=(i=e.dataUpdatedAt)?i:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=e.error;if((0,u.DV)(o)&&o.revert&&this.revertState)return(0,n.Z)({},this.revertState);return(0,n.Z)({},t,{error:o,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,n.Z)({},t,{isInvalidated:!0});case"setState":return(0,n.Z)({},t,e.state);default:return t}},t}(),c=r(38081),h=function(t){function e(e){var r;return(r=t.call(this)||this).config=e||{},r.queries=[],r.queriesMap={},r}(0,o.Z)(e,t);var r=e.prototype;return r.build=function(t,e,r){var n,o=e.queryKey,s=null!=(n=e.queryHash)?n:(0,i.Rm)(o,e),a=this.get(s);return a||(a=new l({cache:this,queryKey:o,queryHash:s,options:t.defaultQueryOptions(e),state:r,defaultOptions:t.getQueryDefaults(o),meta:e.meta}),this.add(a)),a},r.add=function(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"queryAdded",query:t}))},r.remove=function(t){var e=this.queriesMap[t.queryHash];e&&(t.destroy(),this.queries=this.queries.filter(function(e){return e!==t}),e===t&&delete this.queriesMap[t.queryHash],this.notify({type:"queryRemoved",query:t}))},r.clear=function(){var t=this;s.V.batch(function(){t.queries.forEach(function(e){t.remove(e)})})},r.get=function(t){return this.queriesMap[t]},r.getAll=function(){return this.queries},r.find=function(t,e){var r=(0,i.I6)(t,e)[0];return void 0===r.exact&&(r.exact=!0),this.queries.find(function(t){return(0,i._x)(r,t)})},r.findAll=function(t,e){var r=(0,i.I6)(t,e)[0];return Object.keys(r).length>0?this.queries.filter(function(t){return(0,i._x)(r,t)}):this.queries},r.notify=function(t){var e=this;s.V.batch(function(){e.listeners.forEach(function(e){e(t)})})},r.onFocus=function(){var t=this;s.V.batch(function(){t.queries.forEach(function(t){t.onFocus()})})},r.onOnline=function(){var t=this;s.V.batch(function(){t.queries.forEach(function(t){t.onOnline()})})},e}(c.l),f=r(6377),d=function(t){function e(e){var r;return(r=t.call(this)||this).config=e||{},r.mutations=[],r.mutationId=0,r}(0,o.Z)(e,t);var r=e.prototype;return r.build=function(t,e,r){var n=new f.m({mutationCache:this,mutationId:++this.mutationId,options:t.defaultMutationOptions(e),state:r,defaultOptions:e.mutationKey?t.getMutationDefaults(e.mutationKey):void 0,meta:e.meta});return this.add(n),n},r.add=function(t){this.mutations.push(t),this.notify(t)},r.remove=function(t){this.mutations=this.mutations.filter(function(e){return e!==t}),t.cancel(),this.notify(t)},r.clear=function(){var t=this;s.V.batch(function(){t.mutations.forEach(function(e){t.remove(e)})})},r.getAll=function(){return this.mutations},r.find=function(t){return void 0===t.exact&&(t.exact=!0),this.mutations.find(function(e){return(0,i.X7)(t,e)})},r.findAll=function(t){return this.mutations.filter(function(e){return(0,i.X7)(t,e)})},r.notify=function(t){var e=this;s.V.batch(function(){e.listeners.forEach(function(e){e(t)})})},r.onFocus=function(){this.resumePausedMutations()},r.onOnline=function(){this.resumePausedMutations()},r.resumePausedMutations=function(){var t=this.mutations.filter(function(t){return t.state.isPaused});return s.V.batch(function(){return t.reduce(function(t,e){return t.then(function(){return e.continue().catch(i.ZT)})},Promise.resolve())})},e}(c.l),p=r(20956),y=r(28512),m=r(49162),g=function(){function t(t){void 0===t&&(t={}),this.queryCache=t.queryCache||new h,this.mutationCache=t.mutationCache||new d,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=t.prototype;return e.mount=function(){var t=this;this.unsubscribeFocus=p.j.subscribe(function(){p.j.isFocused()&&y.N.isOnline()&&(t.mutationCache.onFocus(),t.queryCache.onFocus())}),this.unsubscribeOnline=y.N.subscribe(function(){p.j.isFocused()&&y.N.isOnline()&&(t.mutationCache.onOnline(),t.queryCache.onOnline())})},e.unmount=function(){var t,e;null==(t=this.unsubscribeFocus)||t.call(this),null==(e=this.unsubscribeOnline)||e.call(this)},e.isFetching=function(t,e){var r=(0,i.I6)(t,e)[0];return r.fetching=!0,this.queryCache.findAll(r).length},e.isMutating=function(t){return this.mutationCache.findAll((0,n.Z)({},t,{fetching:!0})).length},e.getQueryData=function(t,e){var r;return null==(r=this.queryCache.find(t,e))?void 0:r.state.data},e.getQueriesData=function(t){return this.getQueryCache().findAll(t).map(function(t){return[t.queryKey,t.state.data]})},e.setQueryData=function(t,e,r){var n=(0,i._v)(t),o=this.defaultQueryOptions(n);return this.queryCache.build(this,o).setData(e,r)},e.setQueriesData=function(t,e,r){var n=this;return s.V.batch(function(){return n.getQueryCache().findAll(t).map(function(t){var i=t.queryKey;return[i,n.setQueryData(i,e,r)]})})},e.getQueryState=function(t,e){var r;return null==(r=this.queryCache.find(t,e))?void 0:r.state},e.removeQueries=function(t,e){var r=(0,i.I6)(t,e)[0],n=this.queryCache;s.V.batch(function(){n.findAll(r).forEach(function(t){n.remove(t)})})},e.resetQueries=function(t,e,r){var o=this,a=(0,i.I6)(t,e,r),u=a[0],l=a[1],c=this.queryCache,h=(0,n.Z)({},u,{active:!0});return s.V.batch(function(){return c.findAll(u).forEach(function(t){t.reset()}),o.refetchQueries(h,l)})},e.cancelQueries=function(t,e,r){var n=this,o=(0,i.I6)(t,e,r),a=o[0],u=o[1],l=void 0===u?{}:u;return void 0===l.revert&&(l.revert=!0),Promise.all(s.V.batch(function(){return n.queryCache.findAll(a).map(function(t){return t.cancel(l)})})).then(i.ZT).catch(i.ZT)},e.invalidateQueries=function(t,e,r){var o,a,u,l=this,c=(0,i.I6)(t,e,r),h=c[0],f=c[1],d=(0,n.Z)({},h,{active:null==(o=null!=(a=h.refetchActive)?a:h.active)||o,inactive:null!=(u=h.refetchInactive)&&u});return s.V.batch(function(){return l.queryCache.findAll(h).forEach(function(t){t.invalidate()}),l.refetchQueries(d,f)})},e.refetchQueries=function(t,e,r){var o=this,a=(0,i.I6)(t,e,r),u=a[0],l=a[1],c=Promise.all(s.V.batch(function(){return o.queryCache.findAll(u).map(function(t){return t.fetch(void 0,(0,n.Z)({},l,{meta:{refetchPage:null==u?void 0:u.refetchPage}}))})})).then(i.ZT);return(null==l?void 0:l.throwOnError)||(c=c.catch(i.ZT)),c},e.fetchQuery=function(t,e,r){var n=(0,i._v)(t,e,r),o=this.defaultQueryOptions(n);void 0===o.retry&&(o.retry=!1);var s=this.queryCache.build(this,o);return s.isStaleByTime(o.staleTime)?s.fetch(o):Promise.resolve(s.state.data)},e.prefetchQuery=function(t,e,r){return this.fetchQuery(t,e,r).then(i.ZT).catch(i.ZT)},e.fetchInfiniteQuery=function(t,e,r){var n=(0,i._v)(t,e,r);return n.behavior=(0,m.Gm)(),this.fetchQuery(n)},e.prefetchInfiniteQuery=function(t,e,r){return this.fetchInfiniteQuery(t,e,r).then(i.ZT).catch(i.ZT)},e.cancelMutations=function(){var t=this;return Promise.all(s.V.batch(function(){return t.mutationCache.getAll().map(function(t){return t.cancel()})})).then(i.ZT).catch(i.ZT)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(t){return this.mutationCache.build(this,t).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(t){this.defaultOptions=t},e.setQueryDefaults=function(t,e){var r=this.queryDefaults.find(function(e){return(0,i.yF)(t)===(0,i.yF)(e.queryKey)});r?r.defaultOptions=e:this.queryDefaults.push({queryKey:t,defaultOptions:e})},e.getQueryDefaults=function(t){var e;return t?null==(e=this.queryDefaults.find(function(e){return(0,i.to)(t,e.queryKey)}))?void 0:e.defaultOptions:void 0},e.setMutationDefaults=function(t,e){var r=this.mutationDefaults.find(function(e){return(0,i.yF)(t)===(0,i.yF)(e.mutationKey)});r?r.defaultOptions=e:this.mutationDefaults.push({mutationKey:t,defaultOptions:e})},e.getMutationDefaults=function(t){var e;return t?null==(e=this.mutationDefaults.find(function(e){return(0,i.to)(t,e.mutationKey)}))?void 0:e.defaultOptions:void 0},e.defaultQueryOptions=function(t){if(null==t?void 0:t._defaulted)return t;var e=(0,n.Z)({},this.defaultOptions.queries,this.getQueryDefaults(null==t?void 0:t.queryKey),t,{_defaulted:!0});return!e.queryHash&&e.queryKey&&(e.queryHash=(0,i.Rm)(e.queryKey,e)),e},e.defaultQueryObserverOptions=function(t){return this.defaultQueryOptions(t)},e.defaultMutationOptions=function(t){return(null==t?void 0:t._defaulted)?t:(0,n.Z)({},this.defaultOptions.mutations,this.getMutationDefaults(null==t?void 0:t.mutationKey),t,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}()},76732:function(t,e,r){"use strict";r.d(e,{DV:function(){return l},LE:function(){return a},m4:function(){return c}});var n=r(20956),i=r(28512),o=r(92898);function s(t){return Math.min(1e3*Math.pow(2,t),3e4)}function a(t){return"function"==typeof(null==t?void 0:t.cancel)}var u=function(t){this.revert=null==t?void 0:t.revert,this.silent=null==t?void 0:t.silent};function l(t){return t instanceof u}var c=function(t){var e,r,l,c,h=this,f=!1;this.abort=t.abort,this.cancel=function(t){return null==e?void 0:e(t)},this.cancelRetry=function(){f=!0},this.continueRetry=function(){f=!1},this.continue=function(){return null==r?void 0:r()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(t,e){l=t,c=e});var d=function(e){h.isResolved||(h.isResolved=!0,null==t.onSuccess||t.onSuccess(e),null==r||r(),l(e))},p=function(e){h.isResolved||(h.isResolved=!0,null==t.onError||t.onError(e),null==r||r(),c(e))};!function l(){var c;if(!h.isResolved){try{c=t.fn()}catch(t){c=Promise.reject(t)}e=function(t){if(!h.isResolved&&(p(new u(t)),null==h.abort||h.abort(),a(c)))try{c.cancel()}catch(t){}},h.isTransportCancelable=a(c),Promise.resolve(c).then(d).catch(function(e){if(!h.isResolved){var a,u,c=null!=(a=t.retry)?a:3,d=null!=(u=t.retryDelay)?u:s,y="function"==typeof d?d(h.failureCount,e):d,m=!0===c||"number"==typeof c&&h.failureCount<c||"function"==typeof c&&c(h.failureCount,e);if(f||!m){p(e);return}h.failureCount++,null==t.onFail||t.onFail(h.failureCount,e),(0,o.Gh)(y).then(function(){if(!n.j.isFocused()||!i.N.isOnline())return new Promise(function(e){r=e,h.isPaused=!0,null==t.onPause||t.onPause()}).then(function(){r=void 0,h.isPaused=!1,null==t.onContinue||t.onContinue()})}).then(function(){f?p(e):l()})}})}}()}},38081:function(t,e,r){"use strict";r.d(e,{l:function(){return n}});var n=function(){function t(){this.listeners=[]}var e=t.prototype;return e.subscribe=function(t){var e=this,r=t||function(){};return this.listeners.push(r),this.onSubscribe(),function(){e.listeners=e.listeners.filter(function(t){return t!==r}),e.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},t}()},82323:function(){},92898:function(t,e,r){"use strict";r.d(e,{A4:function(){return S},G9:function(){return k},Gh:function(){return x},I6:function(){return f},Kp:function(){return l},PN:function(){return a},Q$:function(){return function t(e,r){if(e===r)return e;var n=Array.isArray(e)&&Array.isArray(r);if(n||b(e)&&b(r)){for(var i=n?e.length:Object.keys(e).length,o=n?r:Object.keys(r),s=o.length,a=n?[]:{},u=0,l=0;l<s;l++){var c=n?l:o[l];a[c]=t(e[c],r[c]),a[c]===e[c]&&u++}return i===s&&u===i?e:a}return r}},Rm:function(){return y},SE:function(){return s},VS:function(){return v},X7:function(){return p},ZT:function(){return o},_v:function(){return c},_x:function(){return d},lV:function(){return h},mc:function(){return u},sk:function(){return i},to:function(){return g},yF:function(){return m}});var n=r(22988),i="undefined"==typeof window;function o(){}function s(t,e){return"function"==typeof t?t(e):t}function a(t){return"number"==typeof t&&t>=0&&t!==1/0}function u(t){return Array.isArray(t)?t:[t]}function l(t,e){return Math.max(t+(e||0)-Date.now(),0)}function c(t,e,r){return _(t)?"function"==typeof e?(0,n.Z)({},r,{queryKey:t,queryFn:e}):(0,n.Z)({},e,{queryKey:t}):t}function h(t,e,r){return _(t)?"function"==typeof e?(0,n.Z)({},r,{mutationKey:t,mutationFn:e}):(0,n.Z)({},e,{mutationKey:t}):"function"==typeof t?(0,n.Z)({},e,{mutationFn:t}):(0,n.Z)({},t)}function f(t,e,r){return _(t)?[(0,n.Z)({},e,{queryKey:t}),r]:[t||{},e]}function d(t,e){var r=t.active,n=t.exact,i=t.fetching,o=t.inactive,s=t.predicate,a=t.queryKey,u=t.stale;if(_(a)){if(n){if(e.queryHash!==y(a,e.options))return!1}else if(!g(e.queryKey,a))return!1}var l=!0===r&&!0===o||null==r&&null==o?"all":!1===r&&!1===o?"none":(null!=r?r:!o)?"active":"inactive";if("none"===l)return!1;if("all"!==l){var c=e.isActive();if("active"===l&&!c||"inactive"===l&&c)return!1}return("boolean"!=typeof u||e.isStale()===u)&&("boolean"!=typeof i||e.isFetching()===i)&&(!s||!!s(e))}function p(t,e){var r=t.exact,n=t.fetching,i=t.predicate,o=t.mutationKey;if(_(o)){if(!e.options.mutationKey)return!1;if(r){if(m(e.options.mutationKey)!==m(o))return!1}else if(!g(e.options.mutationKey,o))return!1}return("boolean"!=typeof n||"loading"===e.state.status===n)&&(!i||!!i(e))}function y(t,e){return((null==e?void 0:e.queryKeyHashFn)||m)(t)}function m(t){return JSON.stringify(u(t),function(t,e){return b(e)?Object.keys(e).sort().reduce(function(t,r){return t[r]=e[r],t},{}):e})}function g(t,e){return function t(e,r){return e===r||typeof e==typeof r&&!!e&&!!r&&"object"==typeof e&&"object"==typeof r&&!Object.keys(r).some(function(n){return!t(e[n],r[n])})}(u(t),u(e))}function v(t,e){if(t&&!e||e&&!t)return!1;for(var r in t)if(t[r]!==e[r])return!1;return!0}function b(t){if(!w(t))return!1;var e=t.constructor;if(void 0===e)return!0;var r=e.prototype;return!!(w(r)&&r.hasOwnProperty("isPrototypeOf"))}function w(t){return"[object Object]"===Object.prototype.toString.call(t)}function _(t){return"string"==typeof t||Array.isArray(t)}function x(t){return new Promise(function(e){setTimeout(e,t)})}function S(t){Promise.resolve().then(t).catch(function(t){return setTimeout(function(){throw t})})}function k(){if("function"==typeof AbortController)return new AbortController}},89555:function(t,e,r){"use strict";r.d(e,{QueryClient:function(){return n.QueryClient},QueryClientProvider:function(){return i.QueryClientProvider},useInfiniteQuery:function(){return i.useInfiniteQuery},useMutation:function(){return i.useMutation},useQuery:function(){return i.useQuery},useQueryClient:function(){return i.useQueryClient}});var n=r(14204);r.o(n,"QueryClientProvider")&&r.d(e,{QueryClientProvider:function(){return n.QueryClientProvider}}),r.o(n,"useInfiniteQuery")&&r.d(e,{useInfiniteQuery:function(){return n.useInfiniteQuery}}),r.o(n,"useMutation")&&r.d(e,{useMutation:function(){return n.useMutation}}),r.o(n,"useQuery")&&r.d(e,{useQuery:function(){return n.useQuery}}),r.o(n,"useQueryClient")&&r.d(e,{useQueryClient:function(){return n.useQueryClient}});var i=r(86704)},86704:function(t,e,r){"use strict";r.d(e,{QueryClientProvider:function(){return d},useInfiniteQuery:function(){return I},useMutation:function(){return _},useQuery:function(){return C},useQueryClient:function(){return f}});var n,i=r(16724),o=r(54887).unstable_batchedUpdates;i.V.setBatchNotifyFunction(o);var s=r(5765),a=console;(0,s.E)(a);var u=r(2265),l=u.createContext(void 0),c=u.createContext(!1);function h(t){return t&&"undefined"!=typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=l),window.ReactQueryClientContext):l}var f=function(){var t=u.useContext(h(u.useContext(c)));if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},d=function(t){var e=t.client,r=t.contextSharing,n=void 0!==r&&r,i=t.children;u.useEffect(function(){return e.mount(),function(){e.unmount()}},[e]);var o=h(n);return u.createElement(c.Provider,{value:n},u.createElement(o.Provider,{value:e},i))},p=r(22988),y=r(92898),m=r(87802),g=r(6377),v=r(38081),b=function(t){function e(e,r){var n;return(n=t.call(this)||this).client=e,n.setOptions(r),n.bindMethods(),n.updateResult(),n}(0,m.Z)(e,t);var r=e.prototype;return r.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},r.setOptions=function(t){this.options=this.client.defaultMutationOptions(t)},r.onUnsubscribe=function(){if(!this.listeners.length){var t;null==(t=this.currentMutation)||t.removeObserver(this)}},r.onMutationUpdate=function(t){this.updateResult();var e={listeners:!0};"success"===t.type?e.onSuccess=!0:"error"===t.type&&(e.onError=!0),this.notify(e)},r.getCurrentResult=function(){return this.currentResult},r.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},r.mutate=function(t,e){return this.mutateOptions=e,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,p.Z)({},this.options,{variables:void 0!==t?t:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},r.updateResult=function(){var t=this.currentMutation?this.currentMutation.state:(0,g.R)(),e=(0,p.Z)({},t,{isLoading:"loading"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset});this.currentResult=e},r.notify=function(t){var e=this;i.V.batch(function(){e.mutateOptions&&(t.onSuccess?(null==e.mutateOptions.onSuccess||e.mutateOptions.onSuccess(e.currentResult.data,e.currentResult.variables,e.currentResult.context),null==e.mutateOptions.onSettled||e.mutateOptions.onSettled(e.currentResult.data,null,e.currentResult.variables,e.currentResult.context)):t.onError&&(null==e.mutateOptions.onError||e.mutateOptions.onError(e.currentResult.error,e.currentResult.variables,e.currentResult.context),null==e.mutateOptions.onSettled||e.mutateOptions.onSettled(void 0,e.currentResult.error,e.currentResult.variables,e.currentResult.context))),t.listeners&&e.listeners.forEach(function(t){t(e.currentResult)})})},e}(v.l);function w(t,e,r){return"function"==typeof e?e.apply(void 0,r):"boolean"==typeof e?e:!!t}function _(t,e,r){var n=u.useRef(!1),o=u.useState(0)[1],s=(0,y.lV)(t,e,r),a=f(),l=u.useRef();l.current?l.current.setOptions(s):l.current=new b(a,s);var c=l.current.getCurrentResult();u.useEffect(function(){n.current=!0;var t=l.current.subscribe(i.V.batchCalls(function(){n.current&&o(function(t){return t+1})}));return function(){n.current=!1,t()}},[]);var h=u.useCallback(function(t,e){l.current.mutate(t,e).catch(y.ZT)},[]);if(c.error&&w(void 0,l.current.options.useErrorBoundary,[c.error]))throw c.error;return(0,p.Z)({},c,{mutate:h,mutateAsync:c.mutate})}var x=r(20956),S=r(76732),k=function(t){function e(e,r){var n;return(n=t.call(this)||this).client=e,n.options=r,n.trackedProps=[],n.selectError=null,n.bindMethods(),n.setOptions(r),n}(0,m.Z)(e,t);var r=e.prototype;return r.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},r.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),E(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},r.onUnsubscribe=function(){this.listeners.length||this.destroy()},r.shouldFetchOnReconnect=function(){return O(this.currentQuery,this.options,this.options.refetchOnReconnect)},r.shouldFetchOnWindowFocus=function(){return O(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},r.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},r.setOptions=function(t,e){var r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(t),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();var i=this.hasListeners();i&&j(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(e),i&&(this.currentQuery!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();var o=this.computeRefetchInterval();i&&(this.currentQuery!==n||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)},r.getOptimisticResult=function(t){var e=this.client.defaultQueryObserverOptions(t),r=this.client.getQueryCache().build(this.client,e);return this.createResult(r,e)},r.getCurrentResult=function(){return this.currentResult},r.trackResult=function(t,e){var r=this,n={},i=function(t){r.trackedProps.includes(t)||r.trackedProps.push(t)};return Object.keys(t).forEach(function(e){Object.defineProperty(n,e,{configurable:!1,enumerable:!0,get:function(){return i(e),t[e]}})}),(e.useErrorBoundary||e.suspense)&&i("error"),n},r.getNextResult=function(t){var e=this;return new Promise(function(r,n){var i=e.subscribe(function(e){e.isFetching||(i(),e.isError&&(null==t?void 0:t.throwOnError)?n(e.error):r(e))})})},r.getCurrentQuery=function(){return this.currentQuery},r.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},r.refetch=function(t){return this.fetch((0,p.Z)({},t,{meta:{refetchPage:null==t?void 0:t.refetchPage}}))},r.fetchOptimistic=function(t){var e=this,r=this.client.defaultQueryObserverOptions(t),n=this.client.getQueryCache().build(this.client,r);return n.fetch().then(function(){return e.createResult(n,r)})},r.fetch=function(t){var e=this;return this.executeFetch(t).then(function(){return e.updateResult(),e.currentResult})},r.executeFetch=function(t){this.updateQuery();var e=this.currentQuery.fetch(this.options,t);return(null==t?void 0:t.throwOnError)||(e=e.catch(y.ZT)),e},r.updateStaleTimeout=function(){var t=this;if(this.clearStaleTimeout(),!y.sk&&!this.currentResult.isStale&&(0,y.PN)(this.options.staleTime)){var e=(0,y.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(function(){t.currentResult.isStale||t.updateResult()},e+1)}},r.computeRefetchInterval=function(){var t;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(t=this.options.refetchInterval)&&t},r.updateRefetchInterval=function(t){var e=this;this.clearRefetchInterval(),this.currentRefetchInterval=t,!y.sk&&!1!==this.options.enabled&&(0,y.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(e.options.refetchIntervalInBackground||x.j.isFocused())&&e.executeFetch()},this.currentRefetchInterval))},r.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},r.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},r.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},r.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},r.createResult=function(t,e){var r,n,i=this.currentQuery,o=this.options,a=this.currentResult,u=this.currentResultState,l=this.currentResultOptions,c=t!==i,h=c?t.state:this.currentQueryInitialState,f=c?this.currentResult:this.previousQueryResult,d=t.state,p=d.dataUpdatedAt,m=d.error,g=d.errorUpdatedAt,v=d.isFetching,b=d.status,w=!1,_=!1;if(e.optimisticResults){var x=this.hasListeners(),S=!x&&E(t,e),k=x&&j(t,i,e,o);(S||k)&&(v=!0,p||(b="loading"))}if(e.keepPreviousData&&!d.dataUpdateCount&&(null==f?void 0:f.isSuccess)&&"error"!==b)r=f.data,p=f.dataUpdatedAt,b=f.status,w=!0;else if(e.select&&void 0!==d.data){if(a&&d.data===(null==u?void 0:u.data)&&e.select===this.selectFn)r=this.selectResult;else try{this.selectFn=e.select,r=e.select(d.data),!1!==e.structuralSharing&&(r=(0,y.Q$)(null==a?void 0:a.data,r)),this.selectResult=r,this.selectError=null}catch(t){(0,s.j)().error(t),this.selectError=t}}else r=d.data;if(void 0!==e.placeholderData&&void 0===r&&("loading"===b||"idle"===b)){if((null==a?void 0:a.isPlaceholderData)&&e.placeholderData===(null==l?void 0:l.placeholderData))n=a.data;else if(n="function"==typeof e.placeholderData?e.placeholderData():e.placeholderData,e.select&&void 0!==n)try{n=e.select(n),!1!==e.structuralSharing&&(n=(0,y.Q$)(null==a?void 0:a.data,n)),this.selectError=null}catch(t){(0,s.j)().error(t),this.selectError=t}void 0!==n&&(b="success",r=n,_=!0)}return this.selectError&&(m=this.selectError,r=this.selectResult,g=Date.now(),b="error"),{status:b,isLoading:"loading"===b,isSuccess:"success"===b,isError:"error"===b,isIdle:"idle"===b,data:r,dataUpdatedAt:p,error:m,errorUpdatedAt:g,failureCount:d.fetchFailureCount,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>h.dataUpdateCount||d.errorUpdateCount>h.errorUpdateCount,isFetching:v,isRefetching:v&&"loading"!==b,isLoadingError:"error"===b&&0===d.dataUpdatedAt,isPlaceholderData:_,isPreviousData:w,isRefetchError:"error"===b&&0!==d.dataUpdatedAt,isStale:P(t,e),refetch:this.refetch,remove:this.remove}},r.shouldNotifyListeners=function(t,e){if(!e)return!0;var r=this.options,n=r.notifyOnChangeProps,i=r.notifyOnChangePropsExclusions;if(!n&&!i||"tracked"===n&&!this.trackedProps.length)return!0;var o="tracked"===n?this.trackedProps:n;return Object.keys(t).some(function(r){var n=t[r]!==e[r],s=null==o?void 0:o.some(function(t){return t===r}),a=null==i?void 0:i.some(function(t){return t===r});return n&&!a&&(!o||s)})},r.updateResult=function(t){var e=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,y.VS)(this.currentResult,e)){var r={cache:!0};(null==t?void 0:t.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,e)&&(r.listeners=!0),this.notify((0,p.Z)({},r,t))}},r.updateQuery=function(){var t=this.client.getQueryCache().build(this.client,this.options);if(t!==this.currentQuery){var e=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==e||e.removeObserver(this),t.addObserver(this))}},r.onQueryUpdate=function(t){var e={};"success"===t.type?e.onSuccess=!0:"error"!==t.type||(0,S.DV)(t.error)||(e.onError=!0),this.updateResult(e),this.hasListeners()&&this.updateTimers()},r.notify=function(t){var e=this;i.V.batch(function(){t.onSuccess?(null==e.options.onSuccess||e.options.onSuccess(e.currentResult.data),null==e.options.onSettled||e.options.onSettled(e.currentResult.data,null)):t.onError&&(null==e.options.onError||e.options.onError(e.currentResult.error),null==e.options.onSettled||e.options.onSettled(void 0,e.currentResult.error)),t.listeners&&e.listeners.forEach(function(t){t(e.currentResult)}),t.cache&&e.client.getQueryCache().notify({query:e.currentQuery,type:"observerResultsUpdated"})})},e}(v.l);function E(t,e){return!1!==e.enabled&&!t.state.dataUpdatedAt&&!("error"===t.state.status&&!1===e.retryOnMount)||t.state.dataUpdatedAt>0&&O(t,e,e.refetchOnMount)}function O(t,e,r){if(!1!==e.enabled){var n="function"==typeof r?r(t):r;return"always"===n||!1!==n&&P(t,e)}return!1}function j(t,e,r,n){return!1!==r.enabled&&(t!==e||!1===n.enabled)&&(!r.suspense||"error"!==t.state.status)&&P(t,r)}function P(t,e){return t.isStaleByTime(e.staleTime)}var T=u.createContext((n=!1,{clearReset:function(){n=!1},reset:function(){n=!0},isReset:function(){return n}}));function R(t,e){var r=u.useRef(!1),n=u.useState(0)[1],o=f(),s=u.useContext(T),a=o.defaultQueryObserverOptions(t);a.optimisticResults=!0,a.onError&&(a.onError=i.V.batchCalls(a.onError)),a.onSuccess&&(a.onSuccess=i.V.batchCalls(a.onSuccess)),a.onSettled&&(a.onSettled=i.V.batchCalls(a.onSettled)),a.suspense&&("number"!=typeof a.staleTime&&(a.staleTime=1e3),0===a.cacheTime&&(a.cacheTime=1)),(a.suspense||a.useErrorBoundary)&&!s.isReset()&&(a.retryOnMount=!1);var l=u.useState(function(){return new e(o,a)})[0],c=l.getOptimisticResult(a);if(u.useEffect(function(){r.current=!0,s.clearReset();var t=l.subscribe(i.V.batchCalls(function(){r.current&&n(function(t){return t+1})}));return l.updateResult(),function(){r.current=!1,t()}},[s,l]),u.useEffect(function(){l.setOptions(a,{listeners:!1})},[a,l]),a.suspense&&c.isLoading)throw l.fetchOptimistic(a).then(function(t){var e=t.data;null==a.onSuccess||a.onSuccess(e),null==a.onSettled||a.onSettled(e,null)}).catch(function(t){s.clearReset(),null==a.onError||a.onError(t),null==a.onSettled||a.onSettled(void 0,t)});if(c.isError&&!s.isReset()&&!c.isFetching&&w(a.suspense,a.useErrorBoundary,[c.error,l.getCurrentQuery()]))throw c.error;return"tracked"===a.notifyOnChangeProps&&(c=l.trackResult(c,a)),c}function C(t,e,r){return R((0,y._v)(t,e,r),k)}var A=r(49162),U=function(t){function e(e,r){return t.call(this,e,r)||this}(0,m.Z)(e,t);var r=e.prototype;return r.bindMethods=function(){t.prototype.bindMethods.call(this),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)},r.setOptions=function(e,r){t.prototype.setOptions.call(this,(0,p.Z)({},e,{behavior:(0,A.Gm)()}),r)},r.getOptimisticResult=function(e){return e.behavior=(0,A.Gm)(),t.prototype.getOptimisticResult.call(this,e)},r.fetchNextPage=function(t){var e;return this.fetch({cancelRefetch:null==(e=null==t?void 0:t.cancelRefetch)||e,throwOnError:null==t?void 0:t.throwOnError,meta:{fetchMore:{direction:"forward",pageParam:null==t?void 0:t.pageParam}}})},r.fetchPreviousPage=function(t){var e;return this.fetch({cancelRefetch:null==(e=null==t?void 0:t.cancelRefetch)||e,throwOnError:null==t?void 0:t.throwOnError,meta:{fetchMore:{direction:"backward",pageParam:null==t?void 0:t.pageParam}}})},r.createResult=function(e,r){var n,i,o,s,a,u,l=e.state,c=t.prototype.createResult.call(this,e,r);return(0,p.Z)({},c,{fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,A.Qy)(r,null==(n=l.data)?void 0:n.pages),hasPreviousPage:(0,A.ZF)(r,null==(i=l.data)?void 0:i.pages),isFetchingNextPage:l.isFetching&&(null==(o=l.fetchMeta)?void 0:null==(s=o.fetchMore)?void 0:s.direction)==="forward",isFetchingPreviousPage:l.isFetching&&(null==(a=l.fetchMeta)?void 0:null==(u=a.fetchMore)?void 0:u.direction)==="backward"})},e}(k);function I(t,e,r){return R((0,y._v)(t,e,r),U)}},76668:function(t){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},52912:function(t,e,r){"use strict";let n;r.d(e,{gq:function(){return tL}});var i=r(9109).lW;let o="function"==typeof atob,s="function"==typeof btoa,a="function"==typeof i,u="function"==typeof TextDecoder?new TextDecoder:void 0,l="function"==typeof TextEncoder?new TextEncoder:void 0,c=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),h=(n={},c.forEach((t,e)=>n[t]=e),n),f=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,d=String.fromCharCode.bind(String),p="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),y=t=>t.replace(/=/g,"").replace(/[+\/]/g,t=>"+"==t?"-":"_"),m=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),g=s?t=>btoa(t):a?t=>i.from(t,"binary").toString("base64"):t=>{let e,r,n,i,o="",s=t.length%3;for(let s=0;s<t.length;){if((r=t.charCodeAt(s++))>255||(n=t.charCodeAt(s++))>255||(i=t.charCodeAt(s++))>255)throw TypeError("invalid character found");o+=c[(e=r<<16|n<<8|i)>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}return s?o.slice(0,s-3)+"===".substring(s):o},v=a?t=>i.from(t).toString("base64"):t=>{let e=[];for(let r=0,n=t.length;r<n;r+=4096)e.push(d.apply(null,t.subarray(r,r+4096)));return g(e.join(""))},b=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?d(192|e>>>6)+d(128|63&e):d(224|e>>>12&15)+d(128|e>>>6&63)+d(128|63&e)}var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return d(240|e>>>18&7)+d(128|e>>>12&63)+d(128|e>>>6&63)+d(128|63&e)},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,_=t=>t.replace(w,b),x=a?t=>i.from(t,"utf8").toString("base64"):l?t=>v(l.encode(t)):t=>g(_(t)),S=(t,e=!1)=>e?y(x(t)):x(t),k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,E=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return d((e>>>10)+55296)+d((1023&e)+56320);case 3:return d((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return d((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},O=t=>t.replace(k,E),j=o?t=>atob(m(t)):a?t=>i.from(t,"base64").toString("binary"):t=>{if(t=t.replace(/\s+/g,""),!f.test(t))throw TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,r="",n,i;for(let o=0;o<t.length;)e=h[t.charAt(o++)]<<18|h[t.charAt(o++)]<<12|(n=h[t.charAt(o++)])<<6|(i=h[t.charAt(o++)]),r+=64===n?d(e>>16&255):64===i?d(e>>16&255,e>>8&255):d(e>>16&255,e>>8&255,255&e);return r},P=a?t=>p(i.from(t,"base64")):t=>p(j(t).split("").map(t=>t.charCodeAt(0))),T=a?t=>i.from(t,"base64").toString("utf8"):u?t=>u.decode(P(t)):t=>O(j(t)),R=t=>m(t.replace(/[-_]/g,t=>"-"==t?"+":"/"));var C=r(51062),A=r.n(C);function U(t){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I(t){var e="function"==typeof Map?new Map:void 0;return(I=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return L(t,arguments,q(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),D(r,t)})(t)}function L(t,e,r){return(L=$()?Reflect.construct.bind():function(t,e,r){var n=[null];n.push.apply(n,e);var i=new(Function.bind.apply(t,n));return r&&D(i,r.prototype),i}).apply(null,arguments)}function $(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function D(t,e){return(D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function q(t){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var F=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D(t,e)}(n,t);var e,r=(e=$(),function(){var t,r=q(n);return t=e?Reflect.construct(r,arguments,q(this).constructor):r.apply(this,arguments),function(t,e){if(e&&("object"===U(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function n(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),(e=r.call(this,t)).originalRequest=o,e.originalResponse=s,e.causingError=i,null!=i&&(t+=", caused by ".concat(i.toString())),null!=o){var a=o.getHeader("X-Request-ID")||"n/a",u=o.getMethod(),l=o.getURL(),c=s?s.getStatus():"n/a",h=s?s.getBody()||"":"n/a";t+=", originated from request (method: ".concat(u,", url: ").concat(l,", response code: ").concat(c,", response text: ").concat(h,", request id: ").concat(a,")")}return e.message=t,e}return Object.defineProperty(n,"prototype",{writable:!1}),n}(I(Error));function N(){N=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o,s,a=Object.create((e&&e.prototype instanceof f?e:f).prototype);return n(a,"_invoke",{value:(o=new S(i||[]),s="suspendedStart",function(e,n){if("executing"===s)throw Error("Generator is already running");if("completed"===s){if("throw"===e)throw n;return E()}for(o.method=e,o.arg=n;;){var i=o.delegate;if(i){var a=function t(e,r){var n=r.method,i=e.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=c(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,o);if(a){if(a===h)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";var u=c(t,r,o);if("normal"===u.type){if(s=o.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(s="completed",o.method="throw",o.arg=u.arg)}})}),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function d(){}function p(){}var y={};u(y,o,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==e&&r.call(g,o)&&(y=g);var v=p.prototype=f.prototype=Object.create(y);function b(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function s(){return new e(function(i,s){!function n(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Q(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,s,a)},function(t){n("throw",t,s,a)}):e.resolve(h).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,a)})}a(u.arg)}(n,o,i,s)})}return i=i?i.then(s,s):s()}})}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,n(v,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then(function(t){return t.done?t.value:s.next()})},b(v),u(v,a,"Generator"),u(v,o,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function B(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){r(t);return}a.done?e(u):Promise.resolve(u).then(n,i)}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,s,a=[],u=!0,l=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw i}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function Q(t){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach(function(e){var n,i;n=e,i=r[e],(n=Z(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function G(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Z(n.key),n)}}function Z(t){var e=function(t,e){if("object"!==Q(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==Q(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Q(e)?e:String(e)}var V=function(){var t,e;function r(t,e){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,r),"resume"in e&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=e,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}return t=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then(function(e){return t._urlStorage.findUploadsByFingerprint(e)})}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(!e){this._emitError(Error("tus: no file or stream to upload provided"));return}if(!this.options.endpoint&&!this.options.uploadUrl&&!this.url){this._emitError(Error("tus: neither an endpoint or an upload URL is provided"));return}var r=this.options.retryDelays;if(null!=r&&"[object Array]"!==Object.prototype.toString.call(r)){this._emitError(Error("tus: the `retryDelays` option must either be an array or null"));return}if(this.options.parallelUploads>1)for(var n=0,i=["uploadUrl","uploadSize","uploadLengthDeferred"];n<i.length;n++){var o=i[n];if(this.options[o]){this._emitError(Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")));return}}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1){this._emitError(Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));return}if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length){this._emitError(Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"));return}}this.options.fingerprint(e,this.options).then(function(r){return(t._fingerprint=r,t._source)?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)}).then(function(e){if(t._source=e,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size)){t._emitError(Error("tus: cannot convert `uploadSize` option into a number"));return}}else if(t._size=t._source.size,null==t._size){t._emitError(Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return}t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()}).catch(function(e){t._emitError(e)})}},{key:"_startParallelUpload",value:function(){var t,e,n=this,i=this._size,o=0;this._parallelUploads=[];var s=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,a=null!==(e=this.options.parallelUploadBoundaries)&&void 0!==e?e:function(t,e){for(var r=Math.floor(t/e),n=[],i=0;i<e;i++)n.push({start:r*i,end:r*(i+1)});return n[e-1].end=t,n}(this._source.size,s);this._parallelUploadUrls&&a.forEach(function(t,e){t.uploadUrl=n._parallelUploadUrls[e]||null}),this._parallelUploadUrls=Array(a.length),Promise.all(a.map(function(t,e){var s=0;return n._source.slice(t.start,t.end).then(function(u){var l=u.value;return new Promise(function(u,c){var h=new r(l,H(H({},n.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:H(H({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:c,onProgress:function(t){o=o-s+t,s=t,n._emitProgress(o,i)},onUploadUrlAvailable:function(){n._parallelUploadUrls[e]=h.url,n._parallelUploadUrls.filter(function(t){return!!t}).length===a.length&&n._saveUploadInUrlStorage()}}));h.start(),n._parallelUploads.push(h)})})})).then(function(){(t=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var e=J(n.options.metadata);return""!==e&&t.setHeader("Upload-Metadata",e),n._sendRequest(t,null)}).then(function(e){if(!W(e.getStatus(),200)){n._emitHttpError(t,e,"tus: unexpected response while creating upload");return}var r=e.getHeader("Location");if(null==r){n._emitHttpError(t,e,"tus: invalid or missing Location header");return}n.url=tr(n.options.endpoint,r),n.url,n._emitSuccess()}).catch(function(t){n._emitError(t)})}},{key:"_startSingleUpload",value:function(){if(this._aborted=!1,null!=this.url){this.url,this._resumeUpload();return}if(null!=this.options.uploadUrl){this.options.uploadUrl,this.url=this.options.uploadUrl,this._resumeUpload();return}this._createUpload()}},{key:"abort",value:function(t){var e=this;return(null!=this._parallelUploads&&this._parallelUploads.forEach(function(e){e.abort(t)}),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url)?r.terminate(this.url,this.options).then(function(){return e._removeFromUrlStorage()}):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,r,n){this._emitError(new F(r,n,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),te(t,this._retryAttempt,this.options))){var r=this.options.retryDelays[this._retryAttempt++];this._offsetBeforeRetry=this._offset,this._retryTimeout=setTimeout(function(){e.start()},r);return}if("function"==typeof this.options.onError)this.options.onError(t);else throw t}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,r){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,r)}},{key:"_createUpload",value:function(){var t,e=this;if(!this.options.endpoint){this._emitError(Error("tus: unable to create upload because no endpoint is provided"));return}var r=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?r.setHeader("Upload-Defer-Length",1):r.setHeader("Upload-Length",this._size);var n=J(this.options.metadata);""!==n&&r.setHeader("Upload-Metadata",n),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,t=this._addChunkToRequest(r)):t=this._sendRequest(r,null),t.then(function(t){if(!W(t.getStatus(),200)){e._emitHttpError(r,t,"tus: unexpected response while creating upload");return}var n=t.getHeader("Location");if(null==n){e._emitHttpError(r,t,"tus: invalid or missing Location header");return}if(e.url=tr(e.options.endpoint,n),e.url,"function"==typeof e.options.onUploadUrlAvailable&&e.options.onUploadUrlAvailable(),0===e._size){e._emitSuccess(),e._source.close();return}e._saveUploadInUrlStorage().then(function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(r,t):(e._offset=0,e._performUpload())})}).catch(function(t){e._emitHttpError(r,null,"tus: failed to create upload",t)})}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then(function(r){var n=r.getStatus();if(!W(n,200)){if(423===n){t._emitHttpError(e,r,"tus: upload is currently locked; retry later");return}if(W(n,400)&&t._removeFromUrlStorage(),!t.options.endpoint){t._emitHttpError(e,r,"tus: unable to resume upload (new upload cannot be created without an endpoint)");return}t.url=null,t._createUpload();return}var i=parseInt(r.getHeader("Upload-Offset"),10);if(Number.isNaN(i)){t._emitHttpError(e,r,"tus: invalid or missing offset value");return}var o=parseInt(r.getHeader("Upload-Length"),10);if(Number.isNaN(o)&&!t.options.uploadLengthDeferred){t._emitHttpError(e,r,"tus: invalid or missing length value");return}"function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then(function(){if(i===o){t._emitProgress(o,o),t._emitSuccess();return}t._offset=i,t._performUpload()})}).catch(function(r){t._emitHttpError(e,null,"tus: failed to resume upload",r)})}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then(function(r){if(!W(r.getStatus(),200)){e._emitHttpError(t,r,"tus: unexpected response while uploading chunk");return}e._handleUploadResponse(t,r)}).catch(function(r){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),r)}))}},{key:"_addChunkToRequest",value:function(t){var e=this,r=this._offset,n=this._offset+this.options.chunkSize;return t.setProgressHandler(function(t){e._emitProgress(r+t,e._size)}),t.setHeader("Content-Type","application/offset+octet-stream"),(n===1/0||n>this._size)&&!this.options.uploadLengthDeferred&&(n=this._size),this._source.slice(r,n).then(function(r){var n=r.value,i=r.done,o=n&&n.size?n.size:0;e.options.uploadLengthDeferred&&i&&(e._size=e._offset+o,t.setHeader("Upload-Length",e._size));var s=e._offset+o;return!e.options.uploadLengthDeferred&&i&&s!==e._size?Promise.reject(Error("upload was configured with a size of ".concat(e._size," bytes, but the source is done after ").concat(s," bytes"))):null===n?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,n))})}},{key:"_handleUploadResponse",value:function(t,e){var r=parseInt(e.getHeader("Upload-Offset"),10);if(Number.isNaN(r)){this._emitHttpError(t,e,"tus: invalid or missing offset value");return}if(this._emitProgress(r,this._size),this._emitChunkComplete(r-this._offset,r,this._size),this._offset=r,r===this._size){this._emitSuccess(),this._source.close();return}this._performUpload()}},{key:"_openRequest",value:function(t,e){var r=Y(t,e,this.options);return this._req=r,r}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch(function(e){t._emitError(e)}),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var e={size:this._size,metadata:this.options.metadata,creationTime:new Date().toString()};return this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then(function(e){t._urlStorageKey=e})}},{key:"_sendRequest",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return X(t,e,this.options)}}],e=[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Y("DELETE",t,e);return X(n,null,e).then(function(t){if(204!==t.getStatus())throw new F("tus: unexpected response while terminating upload",null,n,t)}).catch(function(i){if(i instanceof F||(i=new F("tus: failed to terminate upload",i,n,null)),!te(i,0,e))throw i;var o=e.retryDelays[0],s=e.retryDelays.slice(1),a=H(H({},e),{},{retryDelays:s});return new Promise(function(t){return setTimeout(t,o)}).then(function(){return r.terminate(t,a)})})}}],t&&G(r.prototype,t),e&&G(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}();function J(t){return Object.entries(t).map(function(t){var e=M(t,2),r=e[0],n=e[1];return"".concat(r," ").concat(S(String(n)))}).join(",")}function W(t,e){return t>=e&&t<e+100}function Y(t,e,r){var n=r.httpStack.createRequest(t,e);if(n.setHeader("Tus-Resumable","1.0.0"),Object.entries(r.headers||{}).forEach(function(t){var e=M(t,2),r=e[0],i=e[1];n.setHeader(r,i)}),r.addRequestId){var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});n.setHeader("X-Request-ID",i)}return n}function X(t,e,r){return tt.apply(this,arguments)}function tt(){var t;return t=N().mark(function t(e,r,n){var i;return N().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof n.onBeforeRequest){t.next=3;break}return t.next=3,n.onBeforeRequest(e);case 3:return t.next=5,e.send(r);case 5:if(i=t.sent,"function"!=typeof n.onAfterResponse){t.next=9;break}return t.next=9,n.onAfterResponse(e,i);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}},t)}),(tt=function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(t){B(o,n,i,s,a,"next",t)}function a(t){B(o,n,i,s,a,"throw",t)}s(void 0)})}).apply(this,arguments)}function te(t,e,r){if(null==r.retryDelays||e>=r.retryDelays.length||null==t.originalRequest)return!1;if(r&&"function"==typeof r.onShouldRetry)return r.onShouldRetry(t,e,r);var n,i=t.originalResponse?t.originalResponse.getStatus():0;return(!W(i,400)||409===i||423===i)&&(n=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(n=!1),n)}function tr(t,e){return new(A())(e,t).toString()}function tn(t){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}V.defaultOptions={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null};var ti=function(){var t;function e(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e)}return t=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tn(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tn(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tn(e)?e:String(e)}(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ts=!1;try{ts="localStorage"in window;var ta="tusSupport",tu=localStorage.getItem(ta);localStorage.setItem(ta,tu),null===tu&&localStorage.removeItem(ta)}catch(t){if(t.code===t.SECURITY_ERR||t.code===t.QUOTA_EXCEEDED_ERR)ts=!1;else throw t}var tl=ts,tc=function(){var t;function e(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e)}return t=[{key:"findAllUploads",value:function(){return Promise.resolve(this._findEntries("tus::"))}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve(this._findEntries("tus::".concat(t,"::")))}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var r="tus::".concat(t,"::").concat(Math.round(1e12*Math.random()));return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],r=0;r<localStorage.length;r++){var n=localStorage.key(r);if(0===n.indexOf(t))try{var i=JSON.parse(localStorage.getItem(n));i.urlStorageKey=n,e.push(i)}catch(t){}}return e}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==to(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==to(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===to(e)?e:String(e)}(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function th(t){return(th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tf(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}function td(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==th(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==th(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===th(e)?e:String(e)}(n.key),n)}}function tp(t,e,r){return e&&td(t.prototype,e),r&&td(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var ty=function(){function t(){tf(this,t)}return tp(t,[{key:"createRequest",value:function(t,e){return new tm(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),tm=function(){function t(e,r){tf(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,r,!0),this._method=e,this._url=r,this._headers={}}return tp(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(r,n){t._xhr.onload=function(){r(new tg(t._xhr))},t._xhr.onerror=function(t){n(t)},t._xhr.send(e)})}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),tg=function(){function t(e){tf(this,t),this._xhr=e}return tp(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),tv=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};function tb(t){return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var tw=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}return t=[{key:"slice",value:function(t,e){if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)){var r;return r=this._file.slice(t,e),new Promise(function(t,e){var n=new FileReader;n.onload=function(){t({value:new Uint8Array(n.result)})},n.onerror=function(t){e(t)},n.readAsArrayBuffer(r)})}return Promise.resolve({value:this._file.slice(t,e),done:e>=this.size})}},{key:"close",value:function(){}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tb(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tb(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tb(e)?e:String(e)}(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function t_(t){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tx(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var tS=function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}return t=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var r=this,n=e<=this._bufferOffset+tx(this._buffer);if(this._done||n){var i=this._getDataFromBuffer(t,e),o=null==i&&this._done;return Promise.resolve({value:i,done:o})}return this._reader.read().then(function(n){var i=n.value;return n.done?r._done=!0:void 0===r._buffer?r._buffer=i:r._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}throw Error("Unknown data type")}(r._buffer,i),r._readUntilEnoughDataOrDone(t,e)})}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var r=0===tx(this._buffer);return this._done&&r?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==t_(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==t_(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===t_(e)?e:String(e)}(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function tk(t){return(tk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tE(){tE=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function l(t,e,r,i){var o,s,a=Object.create((e&&e.prototype instanceof f?e:f).prototype);return n(a,"_invoke",{value:(o=new S(i||[]),s="suspendedStart",function(e,n){if("executing"===s)throw Error("Generator is already running");if("completed"===s){if("throw"===e)throw n;return E()}for(o.method=e,o.arg=n;;){var i=o.delegate;if(i){var a=function t(e,r){var n=r.method,i=e.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=void 0,t(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var o=c(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var s=o.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,o);if(a){if(a===h)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===s)throw s="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s="executing";var u=c(t,r,o);if("normal"===u.type){if(s=o.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(s="completed",o.method="throw",o.arg=u.arg)}})}),a}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function f(){}function d(){}function p(){}var y={};u(y,o,function(){return this});var m=Object.getPrototypeOf,g=m&&m(m(k([])));g&&g!==e&&r.call(g,o)&&(y=g);var v=p.prototype=f.prototype=Object.create(y);function b(t){["next","throw","return"].forEach(function(e){u(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var i;n(this,"_invoke",{value:function(n,o){function s(){return new e(function(i,s){!function n(i,o,s,a){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==tk(h)&&r.call(h,"__await")?e.resolve(h.__await).then(function(t){n("next",t,s,a)},function(t){n("throw",t,s,a)}):e.resolve(h).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,a)})}a(u.arg)}(n,o,i,s)})}return i=i?i.then(s,s):s()}})}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=p,n(v,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:d,configurable:!0}),d.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(w.prototype),u(w.prototype,s,function(){return this}),t.AsyncIterator=w,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var s=new w(l(e,r,n,i),o);return t.isGeneratorFunction(r)?s:s.next().then(function(t){return t.done?t.value:s.next()})},b(v),u(v,a,"Generator"),u(v,o,function(){return this}),u(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=k,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return s.type="throw",s.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var a=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function tO(t,e,r,n,i,o,s){try{var a=t[o](s),u=a.value}catch(t){r(t);return}a.done?e(u):Promise.resolve(u).then(n,i)}var tj=function(){var t,e,r;function n(){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n)}return r=[{key:"openFile",value:(t=tE().mark(function t(e,r){var n;return tE().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(tv()&&e&&void 0!==e.uri)){t.next=11;break}return t.prev=1,t.next=4,function(t){return new Promise(function(e,r){var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){e(n.response)},n.onerror=function(t){r(t)},n.open("GET",t),n.send()})}(e.uri);case 4:return n=t.sent,t.abrupt("return",new tw(n));case 8:throw t.prev=8,t.t0=t.catch(1),Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t.t0));case 11:if(!("function"==typeof e.slice&&void 0!==e.size)){t.next=13;break}return t.abrupt("return",Promise.resolve(new tw(e)));case 13:if("function"!=typeof e.read){t.next=18;break}if(Number.isFinite(r=Number(r))){t.next=17;break}return t.abrupt("return",Promise.reject(Error("cannot create source for stream without a finite value for the `chunkSize` option")));case 17:return t.abrupt("return",Promise.resolve(new tS(e,r)));case 18:return t.abrupt("return",Promise.reject(Error("source object may only be an instance of File, Blob, or Reader in this environment")));case 19:case"end":return t.stop()}},t,null,[[1,8]])}),e=function(){var e=this,r=arguments;return new Promise(function(n,i){var o=t.apply(e,r);function s(t){tO(o,n,i,s,a,"next",t)}function a(t){tO(o,n,i,s,a,"throw",t)}s(void 0)})},function(t,r){return e.apply(this,arguments)})}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!==tk(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tk(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tk(e)?e:String(e)}(n.key),n)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n}();function tP(t){return(tP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tT(t,e){return(tT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tR(t){return(tR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function tA(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tC(Object(r),!0).forEach(function(e){var n,i;n=e,i=r[e],(n=tU(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function tU(t){var e=function(t,e){if("object"!==tP(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==tP(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===tP(e)?e:String(e)}var tI=tA(tA({},V.defaultOptions),{},{httpStack:new ty,fileReader:new tj,urlStorage:tl?new tc:new ti,fingerprint:function(t,e){var r;return tv()?Promise.resolve((r=t.exif?function(t){var e=0;if(0===t.length)return e;for(var r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;return e}(JSON.stringify(t.exif)):"noexif",["tus-rn",t.name||"noname",t.size||"nosize",r,e.endpoint].join("/"))):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),tL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tT(t,e)}(n,t);var e,r=(e=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,r=tR(n);return t=e?Reflect.construct(r,arguments,tR(this).constructor):r.apply(this,arguments),function(t,e){if(e&&("object"===tP(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,n),e=tA(tA({},tI),e),r.call(this,t,e)}return function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tU(n.key),n)}}(n,[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=tA(tA({},tI),e),V.terminate(t,e)}}]),Object.defineProperty(n,"prototype",{writable:!1}),n}(V),t$=window,tD=t$.XMLHttpRequest,tq=t$.Blob;tD&&tq&&tq.prototype.slice},51062:function(t,e,r){"use strict";var n=r(76668),i=r(76124),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function h(t){return(t||"").toString().replace(o,"")}var f=[["#","hash"],["?","query"],function(t,e){return y(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function p(t){"undefined"!=typeof window?e=window:void 0!==r.g?e=r.g:"undefined"!=typeof self?e=self:e={};var e,n,i=e.location||{},o={},s=typeof(t=t||i);if("blob:"===t.protocol)o=new g(unescape(t.pathname),{});else if("string"===s)for(n in o=new g(t,{}),d)delete o[n];else if("object"===s){for(n in t)n in d||(o[n]=t[n]);void 0===o.slashes&&(o.slashes=a.test(t.href))}return o}function y(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function m(t,e){t=(t=h(t)).replace(s,""),e=e||{};var r,n=l.exec(t),i=n[1]?n[1].toLowerCase():"",o=!!n[2],a=!!n[3],u=0;return o?a?(r=n[2]+n[3]+n[4],u=n[2].length+n[3].length):(r=n[2]+n[4],u=n[2].length):a?(r=n[3]+n[4],u=n[3].length):r=n[4],"file:"===i?u>=2&&(r=r.slice(2)):y(i)?r=n[4]:i?o&&(r=r.slice(2)):u>=2&&y(e.protocol)&&(r=n[4]),{protocol:i,slashes:o||y(i),slashesCount:u,rest:r}}function g(t,e,r){if(t=(t=h(t)).replace(s,""),!(this instanceof g))return new g(t,e,r);var o,a,u,l,d,v,b=f.slice(),w=typeof e,_=0;for("object"!==w&&"string"!==w&&(r=e,e=null),r&&"function"!=typeof r&&(r=i.parse),o=!(a=m(t||"",e=p(e))).protocol&&!a.slashes,this.slashes=a.slashes||o&&e.slashes,this.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||c.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!y(this.protocol)))&&(b[3]=[/(.*)/,"pathname"]);_<b.length;_++){if("function"==typeof(l=b[_])){t=l(t,this);continue}u=l[0],v=l[1],u!=u?this[v]=t:"string"==typeof u?~(d="@"===u?t.lastIndexOf(u):t.indexOf(u))&&("number"==typeof l[2]?(this[v]=t.slice(0,d),t=t.slice(d+l[2])):(this[v]=t.slice(d),t=t.slice(0,d))):(d=u.exec(t))&&(this[v]=d[1],t=t.slice(0,d.index)),this[v]=this[v]||o&&l[3]&&e[v]||"",l[4]&&(this[v]=this[v].toLowerCase())}r&&(this.query=r(this.query)),o&&e.slashes&&"/"!==this.pathname.charAt(0)&&(""!==this.pathname||""!==e.pathname)&&(this.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,i=r[n-1],o=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(o=!0),r.splice(n,1),s--);return o&&r.unshift(""),("."===i||".."===i)&&r.push(""),r.join("/")}(this.pathname,e.pathname)),"/"!==this.pathname.charAt(0)&&y(this.protocol)&&(this.pathname="/"+this.pathname),n(this.port,this.protocol)||(this.host=this.hostname,this.port=""),this.username=this.password="",this.auth&&(~(d=this.auth.indexOf(":"))?(this.username=this.auth.slice(0,d),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=this.auth.slice(d+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(this.auth)),this.auth=this.password?this.username+":"+this.password:this.username),this.origin="file:"!==this.protocol&&y(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString()}g.prototype={set:function(t,e,r){switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||i.parse)(e)),this[t]=e;break;case"port":this[t]=e,n(e,this.protocol)?e&&(this.host=this.hostname+":"+e):(this.host=this.hostname,this[t]="");break;case"hostname":this[t]=e,this.port&&(e+=":"+this.port),this.host=e;break;case"host":this[t]=e,u.test(e)?(e=e.split(":"),this.port=e.pop(),this.hostname=e.join(":")):(this.hostname=e,this.port="");break;case"protocol":this.protocol=e.toLowerCase(),this.slashes=!r;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";this[t]=e.charAt(0)!==o?o+e:e}else this[t]=e;break;case"username":case"password":this[t]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(this.username=e.slice(0,s),this.username=encodeURIComponent(decodeURIComponent(this.username)),this.password=e.slice(s+1),this.password=encodeURIComponent(decodeURIComponent(this.password))):this.username=encodeURIComponent(decodeURIComponent(e))}for(var a=0;a<f.length;a++){var l=f[a];l[4]&&(this[l[1]]=this[l[1]].toLowerCase())}return this.auth=this.password?this.username+":"+this.password:this.username,this.origin="file:"!==this.protocol&&y(this.protocol)&&this.host?this.protocol+"//"+this.host:"null",this.href=this.toString(),this},toString:function(t){t&&"function"==typeof t||(t=i.stringify);var e,r=this.host,n=this.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(this.protocol&&this.slashes||y(this.protocol)?"//":"");return this.username?(o+=this.username,this.password&&(o+=":"+this.password),o+="@"):this.password?o+=":"+this.password+"@":"file:"!==this.protocol&&y(this.protocol)&&!r&&"/"!==this.pathname&&(o+="@"),(":"===r[r.length-1]||u.test(this.hostname)&&!this.port)&&(r+=":"),o+=r+this.pathname,(e="object"==typeof this.query?t(this.query):this.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),this.hash&&(o+=this.hash),o}},g.extractProtocol=m,g.location=p,g.trimLeft=h,g.qs=i,t.exports=g},20920:function(t,e,r){"use strict";let n;r.d(e,{Z:function(){return a}});var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let o=new Uint8Array(16),s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));var a=function(t,e,r){if(i.randomUUID&&!e&&!t)return i.randomUUID();let a=(t=t||{}).random||(t.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(o)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e){r=r||0;for(let t=0;t<16;++t)e[r+t]=a[t];return e}return function(t,e=0){return s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]}(a)}},22988:function(t,e,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}r.d(e,{Z:function(){return n}})},87802:function(t,e,r){"use strict";function n(t,e){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}r.d(e,{Z:function(){return i}})},3594:function(t,e,r){"use strict";r.d(e,{AY:function(){return eW}});let n=t=>{let e;return t?e=t:"undefined"==typeof fetch?e=(...t)=>Promise.resolve().then(r.t.bind(r,14307,23)).then(({default:e})=>e(...t)):e=fetch,(...t)=>e(...t)};class i extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class o extends i{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class s extends i{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class a extends i{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}(l=c||(c={})).Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2";class u{constructor(t,{headers:e={},customFetch:r,region:i=c.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=n(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r,n,i,u,l;return n=this,i=void 0,u=void 0,l=function*(){try{let n;let{headers:i,method:u,body:l}=e,c={},{region:h}=e;h||(h=this.region),h&&"any"!==h&&(c["x-region"]=h),l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("undefined"!=typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",n=l):"string"==typeof l?(c["Content-Type"]="text/plain",n=l):"undefined"!=typeof FormData&&l instanceof FormData?n=l:(c["Content-Type"]="application/json",n=JSON.stringify(l)));let f=yield this.fetch(`${this.url}/${t}`,{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:n}).catch(t=>{throw new o(t)}),d=f.headers.get("x-relay-error");if(d&&"true"===d)throw new s(f);if(!f.ok)throw new a(f);let p=(null!==(r=f.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return{data:"application/json"===p?yield f.json():"application/octet-stream"===p?yield f.blob():"text/event-stream"===p?f:"multipart/form-data"===p?yield f.formData():yield f.text(),error:null}}catch(t){return{data:null,error:t}}},new(u||(u=Promise))(function(t,e){function r(t){try{s(l.next(t))}catch(t){e(t)}}function o(t){try{s(l.throw(t))}catch(t){e(t)}}function s(e){var n;e.done?t(e.value):((n=e.value)instanceof u?n:new u(function(t){t(n)})).then(r,o)}s((l=l.apply(n,i||[])).next())})}}var l,c,h,f,d,p,y,m,g,v,b,w,_,x,S,k,E,O,j,P,T,R,C=r(14307),A=r.n(C);class U extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}class I{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:"undefined"==typeof fetch?this.fetch=A():this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var e,r,n;let i=null,o=null,s=null,a=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){let e=await t.text();""===e||(o="text/csv"===this.headers.Accept?e:this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?e:JSON.parse(e))}let n=null===(e=this.headers.Prefer)||void 0===e?void 0:e.match(/count=(exact|planned|estimated)/),l=null===(r=t.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&l&&l.length>1&&(s=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,s=null,a=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{let e=await t.text();try{i=JSON.parse(e),Array.isArray(i)&&404===t.status&&(o=[],i=null,a=200,u="OK")}catch(r){404===t.status&&""===e?(a=204,u="No Content"):i={message:e}}if(i&&this.isMaybeSingle&&(null===(n=null==i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,a=200,u="OK"),i&&this.shouldThrowOnError)throw new U(i)}return{error:i,data:o,count:s,status:a,statusText:u}});return this.shouldThrowOnError||(r=r.catch(t=>{var e,r,n;return{error:{message:`${null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"FetchError"}: ${null==t?void 0:t.message}`,details:`${null!==(r=null==t?void 0:t.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==t?void 0:t.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,e)}}class L extends I{select(t){let e=!1,r=(null!=t?t:"*").split("").map(t=>/\s/.test(t)&&!e?"":('"'===t&&(e=!e),t)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${t}.${e?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){let n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){let i=void 0===n?"offset":`${n}.offset`,o=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var s;let a=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,this}rollback(){var t;return(null!==(t=this.headers.Prefer)&&void 0!==t?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class $ extends L{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let r=Array.from(new Set(e)).map(t=>"string"==typeof t&&RegExp("[,()]").test(t)?`"${t}"`:`${t}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return"string"==typeof e?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return"string"==typeof e?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return"string"==typeof e?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");let o=void 0===r?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([t,e])=>{this.url.searchParams.append(t,`eq.${e}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){let n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}}class D{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=e,this.schema=r,this.fetch=n}select(t,{head:e=!1,count:r}={}){let n=!1,i=(null!=t?t:"*").split("").map(t=>/\s/.test(t)&&!n?"":('"'===t&&(n=!n),t)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new $({method:e?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:r=!0}={}){let n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),e&&n.push(`count=${e}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(t)){let e=t.reduce((t,e)=>t.concat(Object.keys(e)),[]);if(e.length>0){let t=[...new Set(e)].map(t=>`"${t}"`);this.url.searchParams.set("columns",t.join(","))}}return new $({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){let o=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==e&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(t)){let e=t.reduce((t,e)=>t.concat(Object.keys(e)),[]);if(e.length>0){let t=[...new Set(e)].map(t=>`"${t}"`);this.url.searchParams.set("columns",t.join(","))}}return new $({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),e&&r.push(`count=${e}`),this.headers.Prefer=r.join(","),new $({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e=[];return t&&e.push(`count=${t}`),this.headers.Prefer&&e.unshift(this.headers.Prefer),this.headers.Prefer=e.join(","),new $({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}let q={"X-Client-Info":"postgrest-js/1.15.2"};class F{constructor(t,{headers:e={},schema:r,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},q),e),this.schemaName=r,this.fetch=n}from(t){return new D(new URL(`${this.url}/${t}`),{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new F(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:n=!1,count:i}={}){let o,s;let a=new URL(`${this.url}/rpc/${t}`);r||n?(o=r?"HEAD":"GET",Object.entries(e).filter(([t,e])=>void 0!==e).map(([t,e])=>[t,Array.isArray(e)?`{${e.join(",")}}`:`${e}`]).forEach(([t,e])=>{a.searchParams.append(t,e)})):(o="POST",s=e);let u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new $({method:o,url:a,headers:u,schema:this.schemaName,body:s,fetch:this.fetch,allowEmpty:!1})}}let N={"X-Client-Info":"realtime-js/2.9.5"};(x=h||(h={}))[x.connecting=0]="connecting",x[x.open=1]="open",x[x.closing=2]="closing",x[x.closed=3]="closed",(S=f||(f={})).closed="closed",S.errored="errored",S.joined="joined",S.joining="joining",S.leaving="leaving",(k=d||(d={})).close="phx_close",k.error="phx_error",k.join="phx_join",k.reply="phx_reply",k.leave="phx_leave",k.access_token="access_token",(p||(p={})).websocket="websocket",(E=y||(y={})).Connecting="connecting",E.Open="open",E.Closing="closing",E.Closed="closed";class B{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class M{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):"string"==typeof t?e(JSON.parse(t)):e({})}_binaryDecode(t){let e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){let n=e.getUint8(1),i=e.getUint8(2),o=this.HEADER_LENGTH+2,s=r.decode(t.slice(o,o+n));o+=n;let a=r.decode(t.slice(o,o+i));return o+=i,{ref:null,topic:s,event:a,payload:JSON.parse(r.decode(t.slice(o,t.byteLength)))}}}class z{constructor(t,e,r={},n=1e4){this.channel=t,this.event=e,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){this.timeoutTimer||(this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref),this.channel._on(this.refEvent,{},t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout))}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(e=>e.status===t).forEach(t=>t.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}(O=m||(m={})).SYNC="sync",O.JOIN="join",O.LEAVE="leave";class Q{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=(null==e?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},t=>{let{onJoin:e,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Q.syncState(this.state,t,e,r),this.pendingDiffs.forEach(t=>{this.state=Q.syncDiff(this.state,t,e,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},t=>{let{onJoin:e,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=Q.syncDiff(this.state,t,e,r),n())}),this.onJoin((t,e,r)=>{this.channel._trigger("presence",{event:"join",key:t,currentPresences:e,newPresences:r})}),this.onLeave((t,e,r)=>{this.channel._trigger("presence",{event:"leave",key:t,currentPresences:e,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,n){let i=this.cloneDeep(t),o=this.transformState(e),s={},a={};return this.map(i,(t,e)=>{o[t]||(a[t]=e)}),this.map(o,(t,e)=>{let r=i[t];if(r){let n=e.map(t=>t.presence_ref),i=r.map(t=>t.presence_ref),o=e.filter(t=>0>i.indexOf(t.presence_ref)),u=r.filter(t=>0>n.indexOf(t.presence_ref));o.length>0&&(s[t]=o),u.length>0&&(a[t]=u)}else s[t]=e}),this.syncDiff(i,{joins:s,leaves:a},r,n)}static syncDiff(t,e,r,n){let{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(e,n)=>{var i;let o=null!==(i=t[e])&&void 0!==i?i:[];if(t[e]=this.cloneDeep(n),o.length>0){let r=t[e].map(t=>t.presence_ref),n=o.filter(t=>0>r.indexOf(t.presence_ref));t[e].unshift(...n)}r(e,o,n)}),this.map(o,(e,r)=>{let i=t[e];if(!i)return;let o=r.map(t=>t.presence_ref);i=i.filter(t=>0>o.indexOf(t.presence_ref)),t[e]=i,n(e,i,r),0===i.length&&delete t[e]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return Object.getOwnPropertyNames(t=this.cloneDeep(t)).reduce((e,r)=>{let n=t[r];return"metas"in n?e[r]=n.metas.map(t=>(t.presence_ref=t.phx_ref,delete t.phx_ref,delete t.phx_ref_prev,t)):e[r]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(j=g||(g={})).abstime="abstime",j.bool="bool",j.date="date",j.daterange="daterange",j.float4="float4",j.float8="float8",j.int2="int2",j.int4="int4",j.int4range="int4range",j.int8="int8",j.int8range="int8range",j.json="json",j.jsonb="jsonb",j.money="money",j.numeric="numeric",j.oid="oid",j.reltime="reltime",j.text="text",j.time="time",j.timestamp="timestamp",j.timestamptz="timestamptz",j.timetz="timetz",j.tsrange="tsrange",j.tstzrange="tstzrange";let K=(t,e,r={})=>{var n;let i=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(e).reduce((r,n)=>(r[n]=H(n,t,e,i),r),{})},H=(t,e,r,n)=>{let i=e.find(e=>e.name===t),o=null==i?void 0:i.type,s=r[t];return o&&!n.includes(o)?G(o,s):Z(s)},G=(t,e)=>{if("_"===t.charAt(0))return Y(e,t.slice(1,t.length));switch(t){case g.bool:return V(e);case g.float4:case g.float8:case g.int2:case g.int4:case g.int8:case g.numeric:case g.oid:return J(e);case g.json:case g.jsonb:return W(e);case g.timestamp:return X(e);case g.abstime:case g.date:case g.daterange:case g.int4range:case g.int8range:case g.money:case g.reltime:case g.text:case g.time:case g.timestamptz:case g.timetz:case g.tsrange:case g.tstzrange:default:return Z(e)}},Z=t=>t,V=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},J=t=>{if("string"==typeof t){let e=parseFloat(t);if(!Number.isNaN(e))return e}return t},W=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(t){console.log(`JSON parse error: ${t}`)}return t},Y=(t,e)=>{if("string"!=typeof t)return t;let r=t.length-1,n=t[r];if("{"===t[0]&&"}"===n){let n;let i=t.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(t){n=i?i.split(","):[]}return n.map(t=>G(e,t))}return t},X=t=>"string"==typeof t?t.replace(" ","T"):t;(P=v||(v={})).ALL="*",P.INSERT="INSERT",P.UPDATE="UPDATE",P.DELETE="DELETE",(T=b||(b={})).BROADCAST="broadcast",T.PRESENCE="presence",T.POSTGRES_CHANGES="postgres_changes",(R=w||(w={})).SUBSCRIBED="SUBSCRIBED",R.TIMED_OUT="TIMED_OUT",R.CLOSED="CLOSED",R.CHANNEL_ERROR="CHANNEL_ERROR";class tt{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=f.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},e.config),this.timeout=this.socket.timeout,this.joinPush=new z(this,d.join,this.params,this.timeout),this.rejoinTimer=new B(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=f.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(t=>t.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=f.closed,this.socket._remove(this)}),this._onError(t=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,t),this.state=f.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=f.errored,this.rejoinTimer.scheduleTimeout())}),this._on(d.reply,{},(t,e)=>{this._trigger(this._replyEventName(e),t)}),this.presence=new Q(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(t,e=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:i,presence:o}}=this.params;this._onError(e=>t&&t("CHANNEL_ERROR",e)),this._onClose(()=>t&&t("CLOSED"));let s={},a={broadcast:i,presence:o,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(t=>t.filter))&&void 0!==n?n:[]};this.socket.accessToken&&(s.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},s)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:e})=>{var r;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0===e){t&&t("SUBSCRIBED");return}{let n=this.bindings.postgres_changes,i=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,o=[];for(let r=0;r<i;r++){let i=n[r],{filter:{event:s,schema:a,table:u,filter:l}}=i,c=e&&e[r];if(c&&c.event===s&&c.schema===a&&c.table===u&&c.filter===l)o.push(Object.assign(Object.assign({},i),{id:c.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=o,t&&t("SUBSCRIBED");return}}).receive("error",e=>{t&&t("CHANNEL_ERROR",Error(JSON.stringify(Object.values(e).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this._on(t,e,r)}async send(t,e={}){var r,n;if(this._canPush()||"broadcast"!==t.type)return new Promise(r=>{var n,i,o;let s=this._push(t.type,t,e.timeout||this.timeout);"broadcast"!==t.type||(null===(o=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||r("ok"),s.receive("ok",()=>r("ok")),s.receive("error",()=>r("error")),s.receive("timeout",()=>r("timed out"))});{let{event:i,payload:o}=t,s={method:"POST",headers:{apikey:null!==(r=this.socket.apiKey)&&void 0!==r?r:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o}]})};try{if((await this._fetchWithTimeout(this.broadcastEndpointURL,s,null!==(n=e.timeout)&&void 0!==n?n:this.timeout)).ok)return"ok";return"error"}catch(t){if("AbortError"===t.name)return"timed out";return"error"}}}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=f.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(d.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let n=new z(this,d.leave,{},t);n.receive("ok",()=>{e(),r("ok")}).receive("timeout",()=>{e(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}_broadcastEndpointURL(){let t=this.socket.endPoint;return(t=(t=t.replace(/^ws/i,"http")).replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,"")).replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(t,e,r){let n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(i),o}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new z(this,t,e,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var n,i;let o=t.toLocaleLowerCase(),{close:s,error:a,leave:u,join:l}=d;if(r&&[s,a,u,l].indexOf(o)>=0&&r!==this._joinRef())return;let c=this._onMessage(o,e,r);if(e&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(t=>{var e,r,n;return(null===(e=t.filter)||void 0===e?void 0:e.event)==="*"||(null===(n=null===(r=t.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o}).map(t=>t.callback(c,r)):null===(i=this.bindings[o])||void 0===i||i.filter(t=>{var r,n,i,s,a,u;if(!["broadcast","presence","postgres_changes"].includes(o))return t.type.toLocaleLowerCase()===o;if("id"in t){let o=t.id,s=null===(r=t.filter)||void 0===r?void 0:r.event;return o&&(null===(n=e.ids)||void 0===n?void 0:n.includes(o))&&("*"===s||(null==s?void 0:s.toLocaleLowerCase())===(null===(i=e.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{let r=null===(a=null===(s=null==t?void 0:t.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(u=null==e?void 0:e.event)||void 0===u?void 0:u.toLocaleLowerCase())}}).map(t=>{if("object"==typeof c&&"ids"in c){let t=c.data,{schema:e,table:r,commit_timestamp:n,type:i,errors:o}=t;c=Object.assign(Object.assign({},{schema:e,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:o}),this._getPayloadRecords(t))}t.callback(c,r)})}_isClosed(){return this.state===f.closed}_isJoined(){return this.state===f.joined}_isJoining(){return this.state===f.joining}_isLeaving(){return this.state===f.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){let n=t.toLocaleLowerCase(),i={type:n,filter:e,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,e){let r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(t=>{var n;return!((null===(n=t.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&tt.isEqual(t.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(d.close,{},t)}_onError(t){this._on(d.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=f.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return("INSERT"===t.type||"UPDATE"===t.type)&&(e.new=K(t.columns,t.record)),("UPDATE"===t.type||"DELETE"===t.type)&&(e.old=K(t.columns,t.old_record)),e}}let te=()=>{},tr="undefined"!=typeof WebSocket;class tn{constructor(t,e){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=N,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=te,this.conn=null,this.sendBuffer=[],this.serializer=new M,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=t=>{let e;return t?e=t:"undefined"==typeof fetch?e=(...t)=>Promise.resolve().then(r.t.bind(r,14307,23)).then(({default:e})=>e(...t)):e=fetch,(...t)=>e(...t)},this.endPoint=`${t}/${p.websocket}`,(null==e?void 0:e.transport)?this.transport=e.transport:this.transport=null,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),(null==e?void 0:e.timeout)&&(this.timeout=e.timeout),(null==e?void 0:e.logger)&&(this.logger=e.logger),(null==e?void 0:e.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=null===(n=null==e?void 0:e.params)||void 0===n?void 0:n.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=(null==e?void 0:e.reconnectAfterMs)?e.reconnectAfterMs:t=>[1e3,2e3,5e3,1e4][t-1]||1e4,this.encode=(null==e?void 0:e.encode)?e.encode:(t,e)=>e(JSON.stringify(t)),this.decode=(null==e?void 0:e.decode)?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new B(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==e?void 0:e.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(tr){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new ti(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),r.e(7035).then(r.t.bind(r,7035,23)).then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,null!=e?e:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){let e=await t.unsubscribe();return 0===this.channels.length&&this.disconnect(),e}async removeAllChannels(){let t=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case h.connecting:return y.Connecting;case h.open:return y.Open;case h.closing:return y.Closing;default:return y.Closed}}isConnected(){return this.connectionState()===y.Open}channel(t,e={config:{}}){let r=new tt(`realtime:${t}`,e,this);return this.channels.push(r),r}push(t){let{topic:e,event:r,payload:n,ref:i}=t,o=()=>{this.encode(t,t=>{var e;null===(e=this.conn)||void 0===e||e.send(t)})};this.log("push",`${e} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(d.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(e=>e.topic===t&&(e._isJoined()||e._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(t){this.decode(t.data,t=>{let{topic:e,event:r,payload:n,ref:i}=t;(i&&i===this.pendingHeartbeatRef||r===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${e} ${r} ${i&&"("+i+")"||""}`,n),this.channels.filter(t=>t._isMember(e)).forEach(t=>t._trigger(r,n,i)),this.stateChangeCallbacks.message.forEach(e=>e(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(d.error))}_appendParams(t,e){if(0===Object.keys(e).length)return t;let r=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${r}${n}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),null===(t=this.conn)||void 0===t||t.close(1e3,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class ti{constructor(t,e,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=h.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class to extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ts(t){return"object"==typeof t&&null!==t&&"__isStorageError"in t}class ta extends to{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class tu extends to{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}let tl=t=>{let e;return t?e=t:"undefined"==typeof fetch?e=(...t)=>Promise.resolve().then(r.t.bind(r,14307,23)).then(({default:e})=>e(...t)):e=fetch,(...t)=>e(...t)},tc=()=>{var t,e,n,i;return t=void 0,e=void 0,n=void 0,i=function*(){return"undefined"==typeof Response?(yield Promise.resolve().then(r.t.bind(r,14307,23))).Response:Response},new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((i=i.apply(t,e||[])).next())})};var th=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(s,a)}u((n=n.apply(t,e||[])).next())})};let tf=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),td=(t,e)=>th(void 0,void 0,void 0,function*(){t instanceof(yield tc())?t.json().then(r=>{e(new ta(tf(r),t.status||500))}).catch(t=>{e(new tu(tf(t),t))}):e(new tu(tf(t),t))}),tp=(t,e,r,n)=>{let i={method:t,headers:(null==e?void 0:e.headers)||{}};return"GET"===t?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function ty(t,e,r,n,i,o){return th(this,void 0,void 0,function*(){return new Promise((s,a)=>{t(r,tp(e,n,i,o)).then(t=>{if(!t.ok)throw t;return(null==n?void 0:n.noResolveJson)?t:t.json()}).then(t=>s(t)).catch(t=>td(t,a))})})}function tm(t,e,r,n){return th(this,void 0,void 0,function*(){return ty(t,"GET",e,r,n)})}function tg(t,e,r,n,i){return th(this,void 0,void 0,function*(){return ty(t,"POST",e,n,i,r)})}function tv(t,e,r,n,i){return th(this,void 0,void 0,function*(){return ty(t,"DELETE",e,n,i,r)})}var tb=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(s,a)}u((n=n.apply(t,e||[])).next())})};let tw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},t_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tx{constructor(t,e={},r,n){this.url=t,this.headers=e,this.bucketId=r,this.fetch=tl(n)}uploadOrUpdate(t,e,r,n){return tb(this,void 0,void 0,function*(){try{let i;let o=Object.assign(Object.assign({},t_),n),s=Object.assign(Object.assign({},this.headers),"POST"===t&&{"x-upsert":String(o.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?((i=new FormData).append("cacheControl",o.cacheControl),i.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(i=r).append("cacheControl",o.cacheControl):(i=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType);let a=this._removeEmptyFolders(e),u=this._getFinalPath(a),l=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:s},(null==o?void 0:o.duplex)?{duplex:o.duplex}:{})),c=yield l.json();if(l.ok)return{data:{path:a,id:c.Id,fullPath:c.Key},error:null};return{data:null,error:c}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}upload(t,e,r){return tb(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,n){return tb(this,void 0,void 0,function*(){let i=this._removeEmptyFolders(t),o=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",e);try{let t;let e=Object.assign({upsert:t_.upsert},n),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(e.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?((t=new FormData).append("cacheControl",e.cacheControl),t.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(t=r).append("cacheControl",e.cacheControl):(t=r,o["cache-control"]=`max-age=${e.cacheControl}`,o["content-type"]=e.contentType);let a=yield this.fetch(s.toString(),{method:"PUT",body:t,headers:o}),u=yield a.json();if(a.ok)return{data:{path:i,fullPath:u.Key},error:null};return{data:null,error:u}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}createSignedUploadUrl(t){return tb(this,void 0,void 0,function*(){try{let e=this._getFinalPath(t),r=yield tg(this.fetch,`${this.url}/object/upload/sign/${e}`,{},{headers:this.headers}),n=new URL(this.url+r.url),i=n.searchParams.get("token");if(!i)throw new to("No token returned by API");return{data:{signedUrl:n.toString(),path:t,token:i},error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}update(t,e,r){return tb(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e){return tb(this,void 0,void 0,function*(){try{return{data:yield tg(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}copy(t,e){return tb(this,void 0,void 0,function*(){try{return{data:{path:(yield tg(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e},{headers:this.headers})).Key},error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}createSignedUrl(t,e,r){return tb(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield tg(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),o=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}createSignedUrls(t,e,r){return tb(this,void 0,void 0,function*(){try{let n=yield tg(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(t=>Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI(`${this.url}${t.signedURL}${i}`):null})),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}download(t,e){return tb(this,void 0,void 0,function*(){let r=void 0!==(null==e?void 0:e.transform),n=this.transformOptsToQueryString((null==e?void 0:e.transform)||{}),i=n?`?${n}`:"";try{let e=this._getFinalPath(t),n=yield tm(this.fetch,`${this.url}/${r?"render/image/authenticated":"object"}/${e}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}getPublicUrl(t,e){let r=this._getFinalPath(t),n=[],i=(null==e?void 0:e.download)?`download=${!0===e.download?"":e.download}`:"";""!==i&&n.push(i);let o=void 0!==(null==e?void 0:e.transform),s=this.transformOptsToQueryString((null==e?void 0:e.transform)||{});""!==s&&n.push(s);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o?"render/image":"object"}/public/${r}${a}`)}}}remove(t){return tb(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}list(t,e,r){return tb(this,void 0,void 0,function*(){try{let n=Object.assign(Object.assign(Object.assign({},tw),e),{prefix:t||""});return{data:yield tg(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}let tS={"X-Client-Info":"storage-js/2.5.5"};var tk=function(t,e,r,n){return new(r||(r=Promise))(function(i,o){function s(t){try{u(n.next(t))}catch(t){o(t)}}function a(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(s,a)}u((n=n.apply(t,e||[])).next())})};class tE{constructor(t,e={},r){this.url=t,this.headers=Object.assign(Object.assign({},tS),e),this.fetch=tl(r)}listBuckets(){return tk(this,void 0,void 0,function*(){try{return{data:yield tm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}getBucket(t){return tk(this,void 0,void 0,function*(){try{return{data:yield tm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}createBucket(t,e={public:!1}){return tk(this,void 0,void 0,function*(){try{return{data:yield tg(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}updateBucket(t,e){return tk(this,void 0,void 0,function*(){try{return{data:yield function(t,e,r,n,i){return th(this,void 0,void 0,function*(){return ty(t,"PUT",e,n,void 0,r)})}(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}emptyBucket(t){return tk(this,void 0,void 0,function*(){try{return{data:yield tg(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}deleteBucket(t){return tk(this,void 0,void 0,function*(){try{return{data:yield tv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(t){if(ts(t))return{data:null,error:t};throw t}})}}class tO extends tE{constructor(t,e={},r){super(t,e,r)}from(t){return new tx(this.url,this.headers,t,this.fetch)}}let tj="";"undefined"!=typeof Deno?tj="deno":"undefined"!=typeof document?tj="web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?tj="react-native":tj="node";let tP={headers:{"X-Client-Info":`supabase-js-${tj}/2.43.2`}},tT={schema:"public"},tR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tC={};var tA=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}();tA.fetch;var tU=tA.fetch.bind(tA);let tI=tA.Headers;tA.Request,tA.Response;let tL=t=>{let e;return t?e=t:"undefined"==typeof fetch?e=tU:e=fetch,(...t)=>e(...t)},t$=()=>"undefined"==typeof Headers?tI:Headers,tD=(t,e,r)=>{let n=tL(r),i=t$();return(r,o)=>{var s,a,u,l;return s=void 0,a=void 0,u=void 0,l=function*(){var s;let a=null!==(s=yield e())&&void 0!==s?s:t,u=new i(null==o?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${a}`),n(r,Object.assign(Object.assign({},o),{headers:u}))},new(u||(u=Promise))(function(t,e){function r(t){try{i(l.next(t))}catch(t){e(t)}}function n(t){try{i(l.throw(t))}catch(t){e(t)}}function i(e){var i;e.done?t(e.value):((i=e.value)instanceof u?i:new u(function(t){t(i)})).then(r,n)}i((l=l.apply(s,a||[])).next())})}},tq="2.64.2",tF={"X-Client-Info":`gotrue-js/${tq}`},tN="X-Supabase-Api-Version",tB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},tM=()=>"undefined"!=typeof document,tz={tested:!1,writable:!1},tQ=()=>{if(!tM())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(tz.tested)return tz.writable;let t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),tz.tested=!0,tz.writable=!0}catch(t){tz.tested=!0,tz.writable=!1}return tz.writable};function tK(t){let e={},r=new URL(t);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((t,r)=>{e[r]=t})}catch(t){}return r.searchParams.forEach((t,r)=>{e[r]=t}),e}let tH=t=>{let e;return t?e=t:"undefined"==typeof fetch?e=(...t)=>Promise.resolve().then(r.t.bind(r,14307,23)).then(({default:e})=>e(...t)):e=fetch,(...t)=>e(...t)},tG=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json,tZ=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},tV=async(t,e)=>{let r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch(t){return r}},tJ=async(t,e)=>{await t.removeItem(e)};class tW{constructor(){this.promise=new tW.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}function tY(t){let e=t.split(".");if(3!==e.length)throw Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw Error("JWT is not valid: payload is not in base64url format");return JSON.parse(function(t){let e,r,n,i,o,s,a;let u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;for(t=t.replace("-","+").replace("_","/");c<t.length;)i=u.indexOf(t.charAt(c++)),o=u.indexOf(t.charAt(c++)),s=u.indexOf(t.charAt(c++)),a=u.indexOf(t.charAt(c++)),e=i<<2|o>>4,r=(15&o)<<4|s>>2,n=(3&s)<<6|a,l+=String.fromCharCode(e),64!=s&&0!=r&&(l+=String.fromCharCode(r)),64!=a&&0!=n&&(l+=String.fromCharCode(n));return l}(e[1]))}async function tX(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function t0(t){return("0"+t.toString(16)).substr(-2)}async function t1(t){let e=new TextEncoder().encode(t);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(t=>String.fromCharCode(t)).join("")}async function t2(t){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder?btoa(await t1(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t)}async function t6(t,e,r=!1){let n=function(){let t=new Uint32Array(56);if("undefined"==typeof crypto){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",e=t.length,r="";for(let n=0;n<56;n++)r+=t.charAt(Math.floor(Math.random()*e));return r}return crypto.getRandomValues(t),Array.from(t,t0).join("")}(),i=n;r&&(i+="/PASSWORD_RECOVERY"),await tZ(t,`${e}-code-verifier`,i);let o=await t2(n),s=n===o?"plain":"s256";return[o,s]}tW.promiseConstructor=Promise;let t3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class t8 extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function t4(t){return"object"==typeof t&&null!==t&&"__isAuthError"in t}class t5 extends t8{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}}class t7 extends t8{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class t9 extends t8{constructor(t,e,r,n){super(t,r,n),this.name=e,this.status=r}}class et extends t9{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ee extends t9{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class er extends t9{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class en extends t9{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ei extends t9{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eo extends t9{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function es(t){return t4(t)&&"AuthRetryableFetchError"===t.name}class ea extends t9{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}var eu=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};let el=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ec=[502,503,504];async function eh(t){var e;let r,n;if(!tG(t))throw new eo(el(t),0);if(ec.includes(t.status))throw new eo(el(t),t.status);try{r=await t.json()}catch(t){throw new t7(el(t),t)}let i=function(t){let e=t.headers.get(tN);if(!e||!e.match(t3))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch(t){return null}}(t);if(i&&i.getTime()>=tB["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?n=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(n=r.error_code),n){if("weak_password"===n)throw new ea(el(r),t.status,(null===(e=r.weak_password)||void 0===e?void 0:e.reasons)||[])}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((t,e)=>t&&"string"==typeof e,!0))throw new ea(el(r),t.status,r.weak_password.reasons);throw new t5(el(r),t.status||500,n)}let ef=(t,e,r,n)=>{let i={method:t,headers:(null==e?void 0:e.headers)||{}};return"GET"===t?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==e?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function ed(t,e,r,n){var i;let o=Object.assign({},null==n?void 0:n.headers);o[tN]||(o[tN]=tB["2024-01-01"].name),(null==n?void 0:n.jwt)&&(o.Authorization=`Bearer ${n.jwt}`);let s=null!==(i=null==n?void 0:n.query)&&void 0!==i?i:{};(null==n?void 0:n.redirectTo)&&(s.redirect_to=n.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",u=await ep(t,e,r+a,{headers:o,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function ep(t,e,r,n,i,o){let s;let a=ef(e,n,i,o);try{s=await t(r,Object.assign({},a))}catch(t){throw console.error(t),new eo(el(t),0)}if(s.ok||await eh(s),null==n?void 0:n.noResolveJson)return s;try{return await s.json()}catch(t){await eh(t)}}function ey(t){var e,r;let n=null;return t.access_token&&t.refresh_token&&t.expires_in&&(n=Object.assign({},t),!t.expires_at)&&(n.expires_at=(r=t.expires_in,Math.round(Date.now()/1e3)+r)),{data:{session:n,user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function em(t){let e=ey(t);return!e.error&&t.weak_password&&"object"==typeof t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&"string"==typeof t.weak_password.message&&t.weak_password.reasons.reduce((t,e)=>t&&"string"==typeof e,!0)&&(e.data.weak_password=t.weak_password),e}function eg(t){var e;return{data:{user:null!==(e=t.user)&&void 0!==e?e:t},error:null}}function ev(t){return{data:t,error:null}}function eb(t){let{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t;return{data:{properties:{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},user:Object.assign({},eu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function ew(t){return t}var e_=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&0>e.indexOf(n)&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)0>e.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r};class ex{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=tH(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e="global"){try{return await ed(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(t){if(t4(t))return{data:null,error:t};throw t}}async inviteUserByEmail(t,e={}){try{return await ed(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:eg})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async generateLink(t){try{let{options:e}=t,r=e_(t,["options"]),n=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await ed(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:eb,redirectTo:null==e?void 0:e.redirectTo})}catch(t){if(t4(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(t){try{return await ed(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:eg})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async listUsers(t){var e,r,n,i,o,s,a;try{let u={nextPage:null,lastPage:0,total:0},l=await ed(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(e=null==t?void 0:t.page)||void 0===e?void 0:e.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null==t?void 0:t.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:ew});if(l.error)throw l.error;let c=await l.json(),h=null!==(o=l.headers.get("x-total-count"))&&void 0!==o?o:0,f=null!==(a=null===(s=l.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return f.length>0&&(f.forEach(t=>{let e=parseInt(t.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(t.split(";")[1].split("=")[1]);u[`${r}Page`]=e}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(t){if(t4(t))return{data:{users:[]},error:t};throw t}}async getUserById(t){try{return await ed(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:eg})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async updateUserById(t,e){try{return await ed(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:eg})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async deleteUser(t,e=!1){try{return await ed(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:eg})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async _listFactors(t){try{let{data:e,error:r}=await ed(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:t=>({data:{factors:t},error:null})});return{data:e,error:r}}catch(t){if(t4(t))return{data:null,error:t};throw t}}async _deleteFactor(t){try{return{data:await ed(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(t){if(t4(t))return{data:null,error:t};throw t}}}let eS={getItem:t=>tQ()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{tQ()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{tQ()&&globalThis.localStorage.removeItem(t)}};function ek(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}let eE={debug:!!(globalThis&&tQ()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class eO extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ej extends eO{}async function eP(t,e,r){eE.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);let n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),eE.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await globalThis.navigator.locks.request(t,0===e?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(n){eE.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await r()}finally{eE.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(0===e)throw eE.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ej(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(eE.debug)try{let t=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(t,null,"  "))}catch(t){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",t)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(t){"undefined"!=typeof self&&(self.globalThis=self)}}();let eT={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:tF,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function eR(t,e,r){return await r()}class eC{constructor(t){var e,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=eC.nextInstanceID,eC.nextInstanceID+=1,this.instanceID>0&&tM()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let n=Object.assign(Object.assign({},eT),t);if(this.logDebugMessages=!!n.debug,"function"==typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new ex({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=tH(n.fetch),this.lock=n.lock||eR,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:tM()&&(null===(e=null==globalThis?void 0:globalThis.navigator)||void 0===e?void 0:e.locks)?this.lock=eP:this.lock=eR,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:tQ()?this.storage=eS:(this.memoryStorage={},this.storage=ek(this.memoryStorage)):(this.memoryStorage={},this.storage=ek(this.memoryStorage)),tM()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(t){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",t)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async t=>{this._debug("received broadcast notification from other tab or client",t),await this._notifyAllSubscribers(t.data.event,t.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tq}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){try{let t=!!tM()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",t),t||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:e,error:r}=await this._getSessionFromURL(t);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),(null==r?void 0:r.message)==="Identity is already linked"||(null==r?void 0:r.message)==="Identity is already linked to another user")return{error:r};return await this._removeSession(),{error:r}}let{session:n,redirectType:i}=e;return this._debug("#_initialize()","detected session in URL",n,"redirect type",i),await this._saveSession(n),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){if(t4(t))return{error:t};return{error:new t7("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,r,n;try{await this._removeSession();let{data:i,error:o}=await ed(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(e=null==t?void 0:t.options)||void 0===e?void 0:e.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.captchaToken}},xform:ey});if(o||!i)return{data:{user:null,session:null},error:o};let s=i.session,a=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",s)),{data:{user:a,session:s},error:null}}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async signUp(t){var e,r,n;try{let i;if(await this._removeSession(),"email"in t){let{email:r,password:n,options:o}=t,s=null,a=null;"pkce"===this.flowType&&([s,a]=await t6(this.storage,this.storageKey)),i=await ed(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==o?void 0:o.emailRedirectTo,body:{email:r,password:n,data:null!==(e=null==o?void 0:o.data)&&void 0!==e?e:{},gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:a},xform:ey})}else if("phone"in t){let{phone:e,password:o,options:s}=t;i=await ed(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:e,password:o,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:ey})}else throw new er("You must provide either an email or phone number and a password");let{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};let a=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithPassword(t){try{let e;if(await this._removeSession(),"email"in t){let{email:r,password:n,options:i}=t;e=await ed(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:em})}else if("phone"in t){let{phone:r,password:n,options:i}=t;e=await ed(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:em})}else throw new er("You must provide either an email or phone number and a password");let{data:r,error:n}=e;if(n)return{data:{user:null,session:null},error:n};if(!r||!r.session||!r.user)return{data:{user:null,session:null},error:new ee};return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(t){var e,r,n,i;return await this._removeSession(),await this._handleProviderSignIn(t.provider,{redirectTo:null===(e=t.options)||void 0===e?void 0:e.redirectTo,scopes:null===(r=t.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=t.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=t.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){let e=await tV(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=e?e:"").split("/"),{data:i,error:o}=await ed(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ey});return(await tJ(this.storage,`${this.storageKey}-code-verifier`),o)?{data:{user:null,session:null,redirectType:null},error:o}:i&&i.session&&i.user?(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:null!=n?n:null}),error:o}):{data:{user:null,session:null,redirectType:null},error:new ee}}async signInWithIdToken(t){await this._removeSession();try{let{options:e,provider:r,token:n,access_token:i,nonce:o}=t,{data:s,error:a}=await ed(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null==e?void 0:e.captchaToken}},xform:ey});if(a)return{data:{user:null,session:null},error:a};if(!s||!s.session||!s.user)return{data:{user:null,session:null},error:new ee};return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:a}}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(t){var e,r,n,i,o;try{if(await this._removeSession(),"email"in t){let{email:n,options:i}=t,o=null,s=null;"pkce"===this.flowType&&([o,s]=await t6(this.storage,this.storageKey));let{error:a}=await ed(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(e=null==i?void 0:i.data)&&void 0!==e?e:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:s},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in t){let{phone:e,options:r}=t,{data:s,error:a}=await ed(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:e,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(o=null==r?void 0:r.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null==s?void 0:s.message_id},error:a}}throw new er("You must provide either an email or phone number.")}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async verifyOtp(t){var e,r;try{let n,i;"email_change"!==t.type&&"phone_change"!==t.type&&await this._removeSession(),"options"in t&&(n=null===(e=t.options)||void 0===e?void 0:e.redirectTo,i=null===(r=t.options)||void 0===r?void 0:r.captchaToken);let{data:o,error:s}=await ed(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:ey});if(s)throw s;if(!o)throw Error("An error occurred on token verification.");let a=o.session,u=o.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==t.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithSSO(t){var e,r,n;try{await this._removeSession();let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await t6(this.storage,this.storageKey)),await ed(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:null!==(r=null===(e=t.options)||void 0===e?void 0:e.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==t?void 0:t.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ev})}catch(t){if(t4(t))return{data:null,error:t};throw t}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{let{data:{session:e},error:r}=t;if(r)throw r;if(!e)throw new et;let{error:n}=await ed(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{"email_change"!=t.type&&"phone_change"!=t.type&&await this._removeSession();let e=`${this.url}/resend`;if("email"in t){let{email:r,type:n,options:i}=t,{error:o}=await ed(this.fetch,"POST",e,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in t){let{phone:r,type:n,options:i}=t,{data:o,error:s}=await ed(this.fetch,"POST",e,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:s}}throw new er("You must provide either an email or phone number and a type")}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let t=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await t,await e()))();return this.pendingInLock.push((async()=>{try{await r}catch(t){}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let t=e();for(this.pendingInLock.push((async()=>{try{await t}catch(t){}})()),await t;this.pendingInLock.length;){let t=[...this.pendingInLock];await Promise.all(t),this.pendingInLock.splice(0,t.length)}return await t}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{let e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,e=await tV(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),null!==e&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let r=!!t.expires_at&&t.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let e=this.suppressGetSessionWarning;t=new Proxy(t,{get:(t,r,n)=>(e||"user"!==r||console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(t,r,n))})}return{data:{session:t},error:null}}let{session:n,error:i}=await this._callRefreshToken(t.refresh_token);if(i)return{data:{session:null},error:i};return{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{if(t)return await ed(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:eg});return await this._useSession(async t=>{var e,r,n;let{data:i,error:o}=t;if(o)throw o;return(null===(e=i.session)||void 0===e?void 0:e.access_token)||this.hasCustomAuthorizationHeader?await ed(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:eg}):{data:{user:null},error:new et}})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async r=>{let{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new et;let o=n.session,s=null,a=null;"pkce"===this.flowType&&null!=t.email&&([s,a]=await t6(this.storage,this.storageKey));let{data:u,error:l}=await ed(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==e?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:s,code_challenge_method:a}),jwt:o.access_token,xform:eg});if(l)throw l;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(t){if(t4(t))return{data:{user:null},error:t};throw t}}_decodeJWT(t){return tY(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new et;let e=Date.now()/1e3,r=e,n=!0,i=null,o=tY(t.access_token);if(o.exp&&(n=(r=o.exp)<=e),n){let{session:e,error:r}=await this._callRefreshToken(t.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!e)return{data:{user:null,session:null},error:null};i=e}else{let{data:n,error:o}=await this._getUser(t.access_token);if(o)throw o;i={access_token:t.access_token,refresh_token:t.refresh_token,user:n.user,token_type:"bearer",expires_in:r-e,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(t4(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var r;if(!t){let{data:n,error:i}=e;if(i)throw i;t=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==t?void 0:t.refresh_token))throw new et;let{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(t4(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(t){try{if(!tM())throw new en("No browser detected.");if("implicit"!==this.flowType||this._isImplicitGrantFlow()){if("pkce"==this.flowType&&!t)throw new ei("Not a valid PKCE flow url.")}else throw new en("Not a valid implicit grant flow url.");let e=tK(window.location.href);if(t){if(!e.code)throw new ei("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}if(e.error||e.error_description||e.error_code)throw new en(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});let{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:s,expires_at:a,token_type:u}=e;if(!i||!s||!o||!u)throw new en("No session defined in URL");let l=Math.round(Date.now()/1e3),c=parseInt(s),h=l+c;a&&(h=parseInt(a));let f=h-l;1e3*f<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${c}s`);let d=h-c;l-d>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",d,h,l):l-d<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",d,h,l);let{data:p,error:y}=await this._getUser(i);if(y)throw y;let m={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:c,expires_at:h,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(t){if(t4(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){let t=tK(window.location.href);return!!(tM()&&(t.access_token||t.error_description))}async _isPKCEFlow(){let t=tK(window.location.href),e=await tV(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var r;let{data:n,error:i}=e;if(i)return{error:i};let o=null===(r=n.session)||void 0===r?void 0:r.access_token;if(o){let{error:e}=await this.admin.signOut(o,t);if(e&&!(t4(e)&&"AuthApiError"===e.name&&(404===e.status||401===e.status||403===e.status)))return{error:e}}return"others"!==t&&(await this._removeSession(),await tJ(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(t){let e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}),r={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})})(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async e=>{var r,n;try{let{data:{session:n},error:i}=e;if(i)throw i;await (null===(r=this.stateChangeEmitters.get(t))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",t,"session",n)}catch(e){await (null===(n=this.stateChangeEmitters.get(t))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",e),console.error(e)}})}async resetPasswordForEmail(t,e={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await t6(this.storage,this.storageKey,!0));try{return await ed(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(t){if(t4(t))return{data:null,error:t};throw t}}async getUserIdentities(){var t;try{let{data:e,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(t=e.user.identities)&&void 0!==t?t:[]},error:null}}catch(t){if(t4(t))return{data:null,error:t};throw t}}async linkIdentity(t){var e;try{let{data:r,error:n}=await this._useSession(async e=>{var r,n,i,o,s;let{data:a,error:u}=e;if(u)throw u;let l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:null===(r=t.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=t.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=t.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await ed(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(s=null===(o=a.session)||void 0===o?void 0:o.access_token)&&void 0!==s?s:void 0})});if(n)throw n;return!tM()||(null===(e=t.options)||void 0===e?void 0:e.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),{data:{provider:t.provider,url:null==r?void 0:r.url},error:null}}catch(e){if(t4(e))return{data:{provider:t.provider,url:null},error:e};throw e}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var r,n;let{data:i,error:o}=e;if(o)throw o;return await ed(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(t4(t))return{data:null,error:t};throw t}}async _refreshAccessToken(t){let e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{var r,n;let i=Date.now();return await (r=async r=>(r>0&&await tX(200*Math.pow(2,r-1)),this._debug(e,"refreshing attempt",r),await ed(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ey})),n=(t,e)=>e&&es(e)&&Date.now()+200*Math.pow(2,t)-i<3e4,new Promise((t,e)=>{(async()=>{for(let i=0;i<1/0;i++)try{let e=await r(i);if(!n(i,null,e)){t(e);return}}catch(t){if(!n(i,t)){e(t);return}}})()}))}catch(t){if(this._debug(e,"error",t),t4(t))return{data:{session:null,user:null},error:t};throw t}finally{this._debug(e,"end")}}_isValidSession(t){return"object"==typeof t&&null!==t&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){let r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",r),tM()&&!e.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;let e="#_recoverAndRefresh()";this._debug(e,"begin");try{let r=await tV(this.storage,this.storageKey);if(this._debug(e,"session from storage",r),!this._isValidSession(r)){this._debug(e,"session is not valid"),null!==r&&await this._removeSession();return}let n=Math.round(Date.now()/1e3),i=(null!==(t=r.expires_at)&&void 0!==t?t:1/0)<n+10;if(this._debug(e,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&r.refresh_token){let{error:t}=await this._callRefreshToken(r.refresh_token);t&&(console.error(t),es(t)||(this._debug(e,"refresh failed with a non-retryable error, removing the session",t),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(t){this._debug(e,"error",t),console.error(t);return}finally{this._debug(e,"end")}}async _callRefreshToken(t){var e,r;if(!t)throw new et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new tW;let{data:e,error:r}=await this._refreshAccessToken(t);if(r)throw r;if(!e.session)throw new et;await this._saveSession(e.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",e.session);let n={session:e.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(t){if(this._debug(n,"error",t),t4(t)){let r={session:null,error:t};return es(t)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),null===(e=this.refreshingDeferred)||void 0===e||e.resolve(r),r}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(t),t}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,e,r=!0){let n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",e,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:e});let n=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(t,e)}catch(t){n.push(t)}});if(await Promise.all(i),n.length>0){for(let t=0;t<n.length;t+=1)console.error(n[t]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await tZ(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await tJ(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tM()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=t,t&&"object"==typeof t&&"function"==typeof t.unref?t.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let t=Date.now();try{return await this._useSession(async e=>{let{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let n=Math.floor((1e3*r.expires_at-t)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof eO)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tM()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){let e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if("visible"!==document.visibilityState){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,r){let n=[`provider=${encodeURIComponent(e)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[t,e]=await t6(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(e)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){let t=new URLSearchParams(r.queryParams);n.push(t.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var r;let{data:n,error:i}=e;return i?{data:null,error:i}:await ed(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(t4(t))return{data:null,error:t};throw t}}async _enroll(t){try{return await this._useSession(async e=>{var r,n;let{data:i,error:o}=e;if(o)return{data:null,error:o};let{data:s,error:a}=await ed(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:t.friendlyName,factor_type:t.factorType,issuer:t.issuer},headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:((null===(n=null==s?void 0:s.totp)||void 0===n?void 0:n.qr_code)&&(s.totp.qr_code=`data:image/svg+xml;utf-8,${s.totp.qr_code}`),{data:s,error:null})})}catch(t){if(t4(t))return{data:null,error:t};throw t}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var r;let{data:n,error:i}=e;if(i)return{data:null,error:i};let{data:o,error:s}=await ed(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})})}catch(t){if(t4(t))return{data:null,error:t};throw t}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var r;let{data:n,error:i}=e;return i?{data:null,error:i}:await ed(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(t4(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(t){let{data:e,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){let{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};let r=(null==t?void 0:t.factors)||[],n=r.filter(t=>"totp"===t.factor_type&&"verified"===t.status);return{data:{all:r,totp:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,r;let{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let o=this._decodeJWT(n.access_token),s=null;o.aal&&(s=o.aal);let a=s;return(null!==(r=null===(e=n.user.factors)||void 0===e?void 0:e.filter(t=>"verified"===t.status))&&void 0!==r?r:[]).length>0&&(a="aal2"),{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:o.amr||[]},error:null}}))}}eC.nextInstanceID=0;var eA=eC;class eU extends eA{constructor(t){super(t)}}class eI{constructor(t,e,r){var n,i,o,s,a,u,l,c;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw Error("supabaseUrl is required.");if(!e)throw Error("supabaseKey is required.");let h=t.replace(/\/$/,"");this.realtimeUrl=`${h}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${h}/auth/v1`,this.storageUrl=`${h}/storage/v1`,this.functionsUrl=`${h}/functions/v1`;let f=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,d=function(t,e){let{db:r,auth:n,realtime:i,global:o}=t,{db:s,auth:a,realtime:u,global:l}=e;return{db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},u),i),global:Object.assign(Object.assign({},l),o)}}(null!=r?r:{},{db:tT,realtime:tC,auth:Object.assign(Object.assign({},tR),{storageKey:f}),global:tP});this.storageKey=null!==(i=null===(n=d.auth)||void 0===n?void 0:n.storageKey)&&void 0!==i?i:"",this.headers=null!==(s=null===(o=d.global)||void 0===o?void 0:o.headers)&&void 0!==s?s:{},this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,null===(u=d.global)||void 0===u?void 0:u.fetch),this.fetch=tD(e,this._getAccessToken.bind(this),null===(l=d.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},d.realtime)),this.rest=new F(`${h}/rest/v1`,{headers:this.headers,schema:null===(c=d.db)||void 0===c?void 0:c.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new u(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new tO(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e,r,n,i,o;return r=this,n=void 0,i=void 0,o=function*(){let{data:r}=yield this.auth.getSession();return null!==(e=null===(t=r.session)||void 0===t?void 0:t.access_token)&&void 0!==e?e:null},new(i||(i=Promise))(function(t,e){function s(t){try{u(o.next(t))}catch(t){e(t)}}function a(t){try{u(o.throw(t))}catch(t){e(t)}}function u(e){var r;e.done?t(e.value):((r=e.value)instanceof i?r:new i(function(t){t(r)})).then(s,a)}u((o=o.apply(r,n||[])).next())})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,debug:s},a,u){var l;let c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eU({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:i,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,flowType:o,debug:s,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new tn(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},null==t?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",null==e?void 0:e.access_token)})}_handleTokenChanged(t,e,r){("TOKEN_REFRESHED"===t||"SIGNED_IN"===t)&&this.changedAccessToken!==r?(this.realtime.setAuth(null!=r?r:null),this.changedAccessToken=r):"SIGNED_OUT"===t&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==e&&this.auth.signOut(),this.changedAccessToken=void 0)}}let eL=(t,e,r)=>new eI(t,e,r);function e$(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function eD(t){return function e(r){return 0==arguments.length||e$(r)?e:t.apply(this,arguments)}}function eq(t){return function e(r,n){switch(arguments.length){case 0:return e;case 1:return e$(r)?e:eD(function(e){return t(r,e)});default:return e$(r)&&e$(n)?e:e$(r)?eD(function(e){return t(e,n)}):e$(n)?eD(function(e){return t(r,e)}):t(r,n)}}}function eF(t){return function e(r,n,i){switch(arguments.length){case 0:return e;case 1:return e$(r)?e:eq(function(e,n){return t(r,e,n)});case 2:return e$(r)&&e$(n)?e:e$(r)?eq(function(e,r){return t(e,n,r)}):e$(n)?eq(function(e,n){return t(r,e,n)}):eD(function(e){return t(r,n,e)});default:return e$(r)&&e$(n)&&e$(i)?e:e$(r)&&e$(n)?eq(function(e,r){return t(e,r,i)}):e$(r)&&e$(i)?eq(function(e,r){return t(e,n,r)}):e$(n)&&e$(i)?eq(function(e,n){return t(r,e,n)}):e$(r)?eD(function(e){return t(e,n,i)}):e$(n)?eD(function(e){return t(r,e,i)}):e$(i)?eD(function(e){return t(r,n,e)}):t(r,n,i)}}}function eN(t){return"[object Object]"===Object.prototype.toString.call(t)}function eB(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var eM=eF(function(t,e,r){var n,i={};for(n in r=r||{},e=e||{})eB(n,e)&&(i[n]=eB(n,r)?t(n,e[n],r[n]):e[n]);for(n in r)eB(n,r)&&!eB(n,i)&&(i[n]=r[n]);return i}),ez=eF(function t(e,r,n){return eM(function(r,n,i){return eN(n)&&eN(i)?t(e,n,i):e(r,n,i)},r,n)}),eQ=eq(function(t,e){return ez(function(t,e,r){return r},t,e)}),eK=r(81614),eH=r(46295);function eG(){return"undefined"!=typeof window&&void 0!==window.document}var eZ={path:"/",sameSite:"lax",httpOnly:!1,maxAge:31536e6};async function eV(t,e){let r=await e(t);if(r)return r;let n=[];for(let r=0;;r++){let i=`${t}.${r}`,o=await e(i);if(!o)break;n.push(o)}if(n.length>0)return n.join("")}async function eJ(t,e,r){if(await e(t)){await r(t);return}for(let n=0;;n++){let i=`${t}.${n}`;if(!await e(i))break;await r(i)}}function eW(t,e,r){let n,i;if(!t||!e)throw Error(`Your project's URL and Key are required to create a Supabase client!

Check your Supabase project's API settings to find these values

https://supabase.com/dashboard/project/_/settings/api`);let o={},s=!0;r&&({cookies:o,isSingleton:s=!0,cookieOptions:n,...i}=r);let a=eQ({global:{headers:{"X-Client-Info":"supabase-ssr/0.0.10"}},auth:{flowType:"pkce",autoRefreshToken:eG(),detectSessionInUrl:eG(),persistSession:!0,storage:{getItem:async t=>await eV(t,async t=>"function"==typeof o.get?await o.get(t):eG()?(0,eK.Q)(document.cookie)[t]:void 0),setItem:async(t,e)=>{let r=await (0,eH.x)(t,e,3180);await Promise.all(r.map(async t=>{"function"==typeof o.set?await o.set(t.name,t.value,{...eZ,...n,maxAge:eZ.maxAge}):eG()&&(document.cookie=(0,eK.q)(t.name,t.value,{...eZ,...n,maxAge:eZ.maxAge}))}))},removeItem:async t=>{if("function"==typeof o.remove&&"function"!=typeof o.get){console.log("Removing chunked cookie without a `get` method is not supported.\n\n	When you call the `createBrowserClient` function from the `@supabase/ssr` package, make sure you declare both a `get` and `remove` method on the `cookies` object.\n\nhttps://supabase.com/docs/guides/auth/server-side/creating-a-client");return}await eJ(t,async t=>"function"==typeof o.get?await o.get(t):eG()?(0,eK.Q)(document.cookie)[t]:void 0,async t=>{"function"==typeof o.remove?await o.remove(t,{...eZ,...n,maxAge:0}):eG()&&(document.cookie=(0,eK.q)(t,"",{...eZ,...n,maxAge:0}))})}}}},i);if(s){let r=eG();if(r&&_)return _;let n=eL(t,e,a);return r&&(_=n),n}return eL(t,e,a)}RegExp(".{1,3180}","g")}}]);