"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4372],{95798:function(e,t,n){n.r(t),n.d(t,{ClientSideSegmentReporter:function(){return s}});var i=n(2265),o=n(16463),a=n(42220),r=n(6398);function s(){return!function(){let e=(0,o.usePathname)(),t=(0,i.useRef)(void 0);(0,i.useEffect)(()=>{var n,i;if(null!=e&&e!==t.current){if("/"===e)a.a.page("Landing");else if(e.startsWith("/browse"))a.a.page("Browse");else if(e.startsWith("/search"))a.a.page("Search");else if(e.startsWith("/pricing"))a.a.page("Pricing");else if(e.startsWith("/collections/")){if((null===(n=t.current)||void 0===n?void 0:n.startsWith("/collections"))===!0){let n=e.split("/")[2],i=t.current.split("/")[2];if(void 0!==n&&void 0!==i&&n===i)return}a.a.page("Collection")}else if(e.startsWith("/collections"))a.a.page("Collections");else if(e.startsWith("/about"))a.a.page("About");else if(e.startsWith("/support"))a.a.page("Contact Support");else if(e.startsWith("/apps/")){if((null===(i=t.current)||void 0===i?void 0:i.startsWith("/apps/"))===!0){let n=e.split("/")[2],i=t.current.split("/")[2];if(void 0!==n&&void 0!==i&&n===i)return}a.a.page("App Detail")}else e.startsWith("/screens")?a.a.page("Screen Detail"):e.startsWith("/flows")?a.a.page("Flow Detail"):e.startsWith("/changelog")?a.a.page("Changelog"):e.startsWith("/blog")?a.a.page("Blog"):e.startsWith("/login")?a.a.page("Login"):e.startsWith("/signup")?a.a.page("Signup"):e.startsWith("settings/team")&&a.a.page("Team Settings");t.current=e}},[e])}(),!function(){let{user:e}=(0,r.av)();(0,i.useEffect)(()=>{a.a.identify(null==e?void 0:e.id,null==e?void 0:e.email)},[null==e?void 0:e.id,null==e?void 0:e.email])}(),null}},42220:function(e,t,n){n.d(t,{a:function(){return a}});var i=n(95801);let o={integrations:{Amplitude:{session_id:Date.now()}},context:{app:{name:i.h.get("NEXT_PUBLIC_VERCEL_GIT_REPO_SLUG",!1),version:i.h.get("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA",!1),build:i.h.get("NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA",!1)}}};class a{static isInitialized(){var e;return!!a.DEBUG||(null===(e=window.analytics)||void 0===e?void 0:e.initialized)===!0}static track(e,t){var n;a.DEBUG&&console.info("[analytics-debug] track: ".concat(e),t),null===(n=window.analytics)||void 0===n||n.track(e,t,o)}static identify(e,t){var n;this.previousUserId!==e&&(this.previousUserId=e,this.DEBUG&&console.info("[analytics-debug] identify: ".concat(e)),void 0!==e&&(null===(n=window.analytics)||void 0===n||n.identify(e,{email:t},o)))}static page(e){var t;this.DEBUG&&console.info("[analytics-debug] page: ".concat(e)),null===(t=window.analytics)||void 0===t||t.page(e)}static reset(){var e;this.DEBUG&&console.info("[analytics-debug] reset"),null===(e=window.analytics)||void 0===e||e.reset()}static setAnonymousId(e){var t;this.DEBUG&&console.info("[analytics-debug] set anonymous id: ".concat(e)),null===(t=window.analytics)||void 0===t||t.setAnonymousId(e)}constructor(){}}a.DEBUG=!1},41002:function(e,t,n){n.r(t),n.d(t,{SetAnonymousIdClientCookie:function(){return a}});var i=n(2265),o=n(42220);function a(e){return(0,i.useEffect)(()=>{"string"==typeof e.anonymousId&&o.a.setAnonymousId(e.anonymousId)},[e.anonymousId]),null}},17414:function(e,t,n){n.d(t,{jB:function(){return i.ClientSideSegmentReporter},aX:function(){return o.a}});var i=n(95798),o=n(42220);n(57437),n(20161),n(50104),n(95801).h.get("SEGMENT_WRITE_KEY",!1),n(41002)},80722:function(e,t,n){n.d(t,{jc:function(){return a},yD:function(){return r},Eh:function(){return i},a9:function(){return s}});let i=new(n(89555)).QueryClient({defaultOptions:{queries:{staleTime:3e5}}}),o="__registry__";function a(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return[[o,Object.fromEntries(e.map(e=>[e,null]))],...n]}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{predicate(e){let{queryKey:n}=e,i=function(e){if(!Array.isArray(e))return null;let t=e[0];return Array.isArray(t)&&(null==t?void 0:t[0])===o?"object"!=typeof t[1]||Array.isArray(t[1])?null:t[1]:null}(n);if(!i)return!1;for(let e of t)if(e in i)return!0;return!1}}}async function s(e){let{queryKeys:t,interval:n,refetches:o}=e;for(let e=0;e<o;e++)await new Promise(e=>setTimeout(e,n)),await i.invalidateQueries(r(...t))}},38079:function(e,t,n){n.d(t,{B:function(){return s}});var i=n(2265);function o(){return()=>{}}function a(){return!1}function r(){return!0}function s(){return{isServerRendered:(0,i.useSyncExternalStore)(o,a,r)}}},6398:function(e,t,n){let i,o;n.d(t,{Ho:function(){return p},ec:function(){return l},_m:function(){return u._},av:function(){return g},rH:function(){return w},Vn:function(){return k}});var a=n(15102),r=n(17414),s=n(80722),u=n(54514);function l(e){if(o)return;let{data:t}=u._.auth.onAuthStateChange((t,n)=>{let o=null==n?void 0:n.user;switch(t){case"SIGNED_IN":if(i===(null==o?void 0:o.email))break;i=null==o?void 0:o.email,o?(a.av({id:o.id,email:o.email}),console.info("[auth] signed in as ".concat(o.id," (").concat(o.email,")"))):console.info("[auth] signed in but did not have user id or email");break;case"SIGNED_OUT":i=void 0,console.info("[auth] signed out"),s.Eh.clear(),e.current.push("/"),r.aX.reset(),a.e(e=>e.setUser(null));break;case"USER_UPDATED":console.info("[auth] user updated"),o&&a.av({id:o.id,email:o.email});break;case"PASSWORD_RECOVERY":console.info("[auth] triggered password recovery");break;case"TOKEN_REFRESHED":console.info("[auth] token refreshed");break;case"INITIAL_SESSION":console.info("Initial session");break;case"MFA_CHALLENGE_VERIFIED":console.info("MFA challenge verified")}});o=t.subscription}var c=n(57437),f=n(2265);let d=Symbol("Auth Context Uninitialized"),h=(0,f.createContext)(d);function p(e){let[t,n]=(0,f.useState)(!0),[i,o]=(0,f.useState)(null);return(0,f.useEffect)(()=>{let{data:{subscription:e}}=u._.auth.onAuthStateChange((e,t)=>{var i,a;"INITIAL_SESSION"===e?(n(!1),o(null!==(i=null==t?void 0:t.user)&&void 0!==i?i:null)):o(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null)});return()=>{e.unsubscribe()}},[]),(0,c.jsx)(h.Provider,{value:{isLoading:t,user:i},children:e.children})}var v=n(38079);function g(){let{isServerRendered:e}=(0,v.B)(),{isLoading:t,user:n}=function(){let e=(0,f.useContext)(h);if(e===d)throw Error("Developer error. No auth context found. Please make sure `<AuthProvider>` is an ancestor component from the component which this hook is called.");return e}();return e?{user:null,isLoading:!0}:{user:n,isLoading:t}}var E=n(89555),y=n(53586),_=n.n(y),m=n(52912),S=n(20920),b=n(95801);let I=b.h.get("NEXT_PUBLIC_SUPABASE_URL");async function A(e){var t,n;let i=_().getExtension(e.file.type),o=null===(n=await u._.auth.getSession())||void 0===n?void 0:null===(t=n.data.session)||void 0===t?void 0:t.access_token;if(null===i)throw Error("Cannot get file extension for file of MIME type: ".concat(e.file.type));let a="".concat(e.subdirectory,"/").concat((0,S.Z)(),".").concat(i);return new Promise(async(t,n)=>{let i=new m.gq(e.file,{endpoint:"".concat(I,"/storage/v1/upload/resumable"),retryDelays:[0,3e3,5e3,1e4],headers:{authorization:"Bearer ".concat(o)},uploadDataDuringCreation:!0,metadata:{bucketName:e.bucket,objectName:a,contentType:e.file.type,cacheControl:"3600"},removeFingerprintOnSuccess:!0,chunkSize:6291456,onSuccess:()=>{let e=i.options.metadata;if(!e){n("Metadata is undefined.");return}let o="".concat(e.bucketName,"/").concat(e.objectName);t({key:o,url:"".concat(I,"/storage/v1/object/public/").concat(o)})},onError:n,onProgress:e.onProgress}),r=await i.findPreviousUploads();if(r.length&&r[0]){var s;i.options.metadata=r[0].metadata,i.resumeFromPreviousUpload(r[0]),null===(s=e.onResume)||void 0===s||s.call(e,r[0].metadata)}i.start()})}function w(){return(0,E.useMutation)(A)}let C=b.h.get("NEXT_PUBLIC_SUPABASE_URL");async function U(e){let t=_().getExtension(e.file.type);if(null===t)throw Error("Cannot get file extension for file of MIME type: ".concat(e.file.type));let n=await u._.storage.from(e.bucket).upload("".concat(e.subdirectory,"/").concat((0,S.Z)(),".").concat(t),e.file,{cacheControl:"3600",contentType:e.file.type});if(n.error)throw n.error;return{key:n.data.path,url:"".concat(C,"/storage/v1/object/public/").concat(e.bucket,"/").concat(n.data.path)}}function k(){return(0,E.useMutation)(U,{retry:3})}},54514:function(e,t,n){n.d(t,{_:function(){return s}});var i=n(3594),o=n(95801);let a=o.h.get("NEXT_PUBLIC_SUPABASE_URL"),r=o.h.get("NEXT_PUBLIC_SUPABASE_ANON_KEY"),s=(0,i.AY)(a,r)}}]);